(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4421],{4083:function(e,a,s){Promise.resolve().then(s.bind(s,8575))},8575:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return l}});var i=s(7437),n=s(2265),t=s(6151);function l(){let[e,a]=(0,n.useState)(""),[s,l]=(0,n.useState)(!1),r=async()=>{l(!0),a("\uD83D\uDD04 Applying image upload updates to Applications...\n\n");try{a(e=>e+"1. Checking current applications table schema...\n");let{data:e,error:s}=await t.O.from("applications").select("*").limit(1);if(s){a(e=>e+"   ❌ Error checking schema: ".concat(s.message,"\n"));return}let i=null==e?void 0:e[0];if(i){let e=Object.keys(i);a(a=>a+"   ✅ Current fields: ".concat(e.join(", "),"\n")),e.includes("images")?a(e=>e+"   ✅ images[] column already exists\n"):a(e=>e+"   ⚠️  images[] column missing - needs to be added\n")}else a(e=>e+"   ℹ️  Table is empty\n");a(e=>e+"\n2. Testing images column support...\n");try{let{data:e,error:s}=await t.O.from("applications").insert([{name:"Image Test Application",description:"Testing multiple images support",images:["https://example.com/test1.jpg","https://example.com/test2.jpg"],use_cases:["Test use case"],benefits:["Test benefit"],is_active:!0,display_order:999}]).select().single();s?s.message.includes('column "images" does not exist')?(a(e=>e+"   ❌ images column does not exist\n"),a(e=>e+"   \uD83D\uDCA1 You need to run this SQL command in Supabase:\n"),a(e=>e+"   ALTER TABLE applications ADD COLUMN images TEXT[];\n")):a(e=>e+"   ❌ Insert test failed: ".concat(s.message,"\n")):(a(e=>e+"   ✅ images column is working!\n"),await t.O.from("applications").delete().eq("id",e.id),a(e=>e+"   \uD83E\uDDF9 Test data cleaned up\n"))}catch(e){a(a=>a+"   ❌ Column test failed: ".concat(e.message,"\n"))}a(e=>e+"\n3. Checking for existing image_url data...\n");try{let{data:e,error:s}=await t.O.from("applications").select("id, name, image_url, images").not("image_url","is",null).neq("image_url","");s?a(e=>e+"   ⚠️  Could not check existing data: ".concat(s.message,"\n")):e&&e.length>0?(a(a=>a+"   \uD83D\uDCCA Found ".concat(e.length," records with image_url data\n")),e.slice(0,3).forEach(e=>{a(a=>a+"   • ".concat(e.name,": ").concat(e.image_url,"\n"))}),e.length>3&&a(a=>a+"   ... and ".concat(e.length-3," more records\n")),a(e=>e+"   \uD83D\uDCA1 Consider migrating this data to images[] column\n")):a(e=>e+"   ✅ No existing image_url data found\n")}catch(e){a(a=>a+"   ⚠️  Data check failed: ".concat(e.message,"\n"))}a(e=>e+"\n4. Summary and next steps:\n"),a(e=>e+"   ✅ Forms updated to use ImageUploader component\n"),a(e=>e+"   ✅ Database interfaces updated\n"),a(e=>e+"   ✅ Display components updated\n"),a(e=>e+"\n\uD83D\uDCCB Required SQL Commands (run in Supabase SQL Editor):\n\n"),a(e=>e+"-- Add images column if it doesn't exist\nALTER TABLE applications ADD COLUMN IF NOT EXISTS images TEXT[];\n\n-- Migrate existing image_url data to images array (optional)\nUPDATE applications \nSET images = CASE \n  WHEN image_url IS NOT NULL AND image_url != '' THEN ARRAY[image_url]\n  ELSE ARRAY[]::TEXT[]\nEND\nWHERE images IS NULL OR array_length(images, 1) IS NULL;\n\n-- Verify the migration\nSELECT id, name, image_url, images FROM applications LIMIT 5;\n\n"),a(e=>e+"\uD83D\uDE80 Next steps:\n"),a(e=>e+"1. Run the SQL commands above in Supabase SQL Editor\n"),a(e=>e+"2. Test image upload at /test-image-upload\n"),a(e=>e+"3. Try adding a new application with images\n"),a(e=>e+"4. Verify images display correctly on the frontend\n"),a(e=>e+"\n\uD83C\uDF89 Image upload system is ready!\n")}catch(e){a(a=>a+"\n❌ Update process failed: ".concat(e.message,"\n"))}finally{l(!1)}};return(0,i.jsxs)("div",{className:"p-8",children:[(0,i.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"\uD83D\uDCF8 Apply Image Upload Updates"}),(0,i.jsxs)("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold text-green-800 mb-2",children:"✅ Updates Applied"}),(0,i.jsx)("p",{className:"text-green-700 mb-2",children:"The following updates have been applied to support image upload in Applications:"}),(0,i.jsxs)("div",{className:"text-sm text-green-600",children:[(0,i.jsx)("strong",{children:"Code changes completed:"}),(0,i.jsxs)("ul",{className:"mt-1 space-y-1",children:[(0,i.jsx)("li",{children:"• ✅ Application forms updated to use ImageUploader"}),(0,i.jsx)("li",{children:"• ✅ Database interfaces updated to support images[]"}),(0,i.jsx)("li",{children:"• ✅ Display components updated for multiple images"}),(0,i.jsx)("li",{children:"• ✅ Backward compatibility maintained"})]})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,i.jsxs)("button",{onClick:r,disabled:s,className:"bg-green-600 text-white px-6 py-4 rounded-lg hover:bg-green-700 disabled:opacity-50 text-left",children:[(0,i.jsx)("div",{className:"font-semibold mb-1",children:"\uD83D\uDD0D Check Database Status"}),(0,i.jsx)("div",{className:"text-sm opacity-90",children:"Verify current schema and data"})]}),(0,i.jsxs)("button",{onClick:()=>{a("\n-- \uD83D\uDCF8 Complete Applications Image Migration Script\n-- Run these commands in your Supabase SQL Editor\n\n-- Step 1: Add images column\nALTER TABLE applications ADD COLUMN IF NOT EXISTS images TEXT[];\n\n-- Step 2: Migrate existing image_url data\nUPDATE applications \nSET images = CASE \n  WHEN image_url IS NOT NULL AND image_url != '' THEN ARRAY[image_url]\n  ELSE ARRAY[]::TEXT[]\nEND\nWHERE images IS NULL OR array_length(images, 1) IS NULL;\n\n-- Step 3: Verify migration results\nSELECT \n  id, \n  name, \n  image_url, \n  images,\n  CASE \n    WHEN images IS NOT NULL AND array_length(images, 1) > 0 THEN 'Has images array'\n    WHEN image_url IS NOT NULL AND image_url != '' THEN 'Has image_url only'\n    ELSE 'No images'\n  END as image_status\nFROM applications\nORDER BY id;\n\n-- Step 4: (Optional) Clean up old image_url column after confirming migration\n-- Only run this after verifying everything works correctly\n-- ALTER TABLE applications DROP COLUMN image_url;\n\n-- Step 5: Check final schema\nSELECT column_name, data_type, is_nullable \nFROM information_schema.columns \nWHERE table_name = 'applications' \nAND column_name IN ('image_url', 'images')\nORDER BY ordinal_position;\n")},className:"bg-blue-600 text-white px-6 py-4 rounded-lg hover:bg-blue-700 text-left",children:[(0,i.jsx)("div",{className:"font-semibold mb-1",children:"\uD83D\uDCDD Show Migration SQL"}),(0,i.jsx)("div",{className:"text-sm opacity-90",children:"Get complete database migration commands"})]})]}),e&&(0,i.jsxs)("div",{className:"bg-gray-900 text-green-400 p-6 rounded-lg font-mono text-sm mb-8",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsx)("h2",{className:"text-lg text-white",children:"\uD83D\uDCCB Update Results:"}),(0,i.jsx)("button",{onClick:()=>navigator.clipboard.writeText(e),className:"bg-gray-700 text-white px-3 py-1 rounded text-xs hover:bg-gray-600",children:"\uD83D\uDCCB Copy"})]}),(0,i.jsx)("pre",{className:"whitespace-pre-wrap max-h-96 overflow-y-auto",children:e})]}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,i.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"1️⃣ Database Setup"}),(0,i.jsxs)("div",{className:"text-sm text-blue-700 space-y-2",children:[(0,i.jsx)("p",{children:"Run SQL commands to:"}),(0,i.jsxs)("ul",{className:"space-y-1",children:[(0,i.jsx)("li",{children:"• Add images[] column"}),(0,i.jsx)("li",{children:"• Migrate existing data"}),(0,i.jsx)("li",{children:"• Verify schema"})]})]})]}),(0,i.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-green-800 mb-2",children:"2️⃣ Test Upload"}),(0,i.jsxs)("div",{className:"text-sm text-green-700 space-y-2",children:[(0,i.jsx)("p",{children:"Visit /test-image-upload to:"}),(0,i.jsxs)("ul",{className:"space-y-1",children:[(0,i.jsx)("li",{children:"• Test API endpoint"}),(0,i.jsx)("li",{children:"• Try file uploads"}),(0,i.jsx)("li",{children:"• Verify functionality"})]})]})]}),(0,i.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-purple-800 mb-2",children:"3️⃣ Test Forms"}),(0,i.jsxs)("div",{className:"text-sm text-purple-700 space-y-2",children:[(0,i.jsx)("p",{children:"Try the updated forms:"}),(0,i.jsxs)("ul",{className:"space-y-1",children:[(0,i.jsx)("li",{children:"• /admin/applications/new"}),(0,i.jsx)("li",{children:"• Edit existing applications"}),(0,i.jsx)("li",{children:"• Upload multiple images"})]})]})]}),(0,i.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[(0,i.jsx)("h3",{className:"font-semibold text-orange-800 mb-2",children:"4️⃣ Verify Display"}),(0,i.jsxs)("div",{className:"text-sm text-orange-700 space-y-2",children:[(0,i.jsx)("p",{children:"Check frontend display:"}),(0,i.jsxs)("ul",{className:"space-y-1",children:[(0,i.jsx)("li",{children:"• Home page applications"}),(0,i.jsx)("li",{children:"• Applications list page"}),(0,i.jsx)("li",{children:"• Image galleries"})]})]})]})]}),(0,i.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold text-yellow-800 mb-4",children:"⚡ Quick Start Guide"}),(0,i.jsxs)("div",{className:"text-sm text-yellow-700 space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"1. Database Migration (Required):"}),(0,i.jsx)("p",{children:"Copy and run the SQL commands in your Supabase SQL Editor to add the images[] column."})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"2. Test Image Upload:"}),(0,i.jsx)("p",{children:"Visit /test-image-upload to verify the upload system works correctly."})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"3. Try the Forms:"}),(0,i.jsx)("p",{children:"Go to /admin/applications/new and try uploading images using drag & drop or file selection."})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"4. Production Setup (Optional):"}),(0,i.jsx)("p",{children:"Configure Supabase Storage for real image uploads instead of placeholder images."})]})]})]})]})}},6151:function(e,a,s){"use strict";s.d(a,{O:function(){return l},e:function(){return r}});var i=s(6580);let n="https://ilxfqrxybtcftioizoan.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlseGZxcnh5YnRjZnRpb2l6b2FuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM4NTg5MjMsImV4cCI6MjA2OTQzNDkyM30.Jhjy7136xlqHcVjeCGPDvh4Ofpio3a09Y2fFu2Sqqh0";n||console.warn("Supabase URL not configured properly. Using fallback configuration."),t||console.warn("Supabase Anon Key not configured properly. Using fallback configuration.");let l=(0,i.eI)(n||"https://placeholder.supabase.co",t||"placeholder-key"),r=()=>(0,i.eI)(n||"https://placeholder.supabase.co",t||"placeholder-key")}},function(e){e.O(0,[6580,2971,2117,1744],function(){return e(e.s=4083)}),_N_E=e.O()}]);