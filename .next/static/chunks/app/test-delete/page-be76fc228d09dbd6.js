(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2210],{54990:function(e,t,s){Promise.resolve().then(s.bind(s,87577))},87577:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var r=s(57437),l=s(2265),a=s(69064),n=s(18930),o=s(14924),c=s(99397),i=s(82431),d=s(63639),u=s(65302);function h(){let[e,t]=(0,l.useState)([]),[s,h]=(0,l.useState)(!1),[m,x]=(0,l.useState)(""),[f,p]=(0,l.useState)([]),g=async()=>{h(!0);try{let s=await fetch("/api/upload/folders");if(s.ok){var e;let r=await s.json();t(r.folders||[]),y("✅ Loaded ".concat((null===(e=r.folders)||void 0===e?void 0:e.length)||0," folders"))}else y("❌ Failed to load folders: ".concat(s.status))}catch(e){y("❌ Error loading folders: ".concat(e))}finally{h(!1)}},y=e=>{p(t=>[...t,"".concat(new Date().toLocaleTimeString(),": ").concat(e)])},b=async()=>{if(!m.trim()){a.ZP.error("Please enter a folder name");return}h(!0),y("\uD83D\uDD04 Creating folder: ".concat(m));try{let e=await fetch("/api/upload/folders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({folderName:m.trim()})}),t=await e.json();y("\uD83D\uDCDD Create response: ".concat(JSON.stringify(t))),e.ok?(a.ZP.success("Folder created successfully"),y("✅ Folder created: ".concat(m)),x(""),g()):(a.ZP.error(t.error||"Failed to create folder"),y("❌ Create failed: ".concat(t.error)))}catch(e){y("❌ Create error: ".concat(e)),a.ZP.error("Error creating folder")}finally{h(!1)}},j=async e=>{if(y("\uD83D\uDD04 Starting deletion of folder: ".concat(e.name," (").concat(e.fullPath,")")),!confirm('Delete folder "'.concat(e.name,'"?'))){y("❌ Deletion cancelled by user");return}h(!0);try{y("\uD83D\uDCE4 Sending DELETE request to: /api/upload/folders?path=".concat(encodeURIComponent(e.fullPath)));let t=await fetch("/api/upload/folders?path=".concat(encodeURIComponent(e.fullPath)),{method:"DELETE"});y("\uD83D\uDCE5 Response status: ".concat(t.status," ").concat(t.statusText));let s=await t.json();y("\uD83D\uDCDD Response body: ".concat(JSON.stringify(s))),t.ok?(a.ZP.success('Folder "'.concat(e.name,'" deleted successfully')),y("✅ Folder deleted successfully: ".concat(e.name)),g()):(a.ZP.error(s.error||"Failed to delete folder"),y("❌ Delete failed: ".concat(s.error||"Unknown error")))}catch(e){y("❌ Network error: ".concat(e)),a.ZP.error("Network error occurred")}finally{h(!1)}},D=async()=>{y("\uD83E\uDDEA Testing DELETE API endpoint directly...");try{let e=await fetch("/api/upload/folders?path=test-folder",{method:"DELETE"});y("\uD83D\uDCE5 API Test Response: ".concat(e.status," ").concat(e.statusText));let t=await e.json();y("\uD83D\uDCDD API Test Body: ".concat(JSON.stringify(t)))}catch(e){y("❌ API Test Error: ".concat(e))}};return(0,l.useEffect)(()=>{g()},[]),(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 p-6",children:[(0,r.jsx)(a.Toaster,{position:"top-right"}),(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[(0,r.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 mb-4 flex items-center",children:[(0,r.jsx)(n.Z,{className:"h-6 w-6 mr-2 text-red-600"}),"\uD83D\uDD27 Delete Functionality Diagnostic Tool"]}),(0,r.jsx)("p",{className:"text-gray-600",children:"This tool helps diagnose issues with folder deletion. It provides detailed logging of all API calls and responses."})]}),(0,r.jsxs)("div",{className:"grid lg:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[(0,r.jsx)(o.Z,{className:"h-5 w-5 mr-2 text-blue-600"}),"\uD83D\uDCC1 Folder Management"]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Create Test Folder:"}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),placeholder:"Enter folder name...",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",onKeyPress:e=>"Enter"===e.key&&b()}),(0,r.jsxs)("button",{onClick:b,disabled:s||!m.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 flex items-center",children:[(0,r.jsx)(c.Z,{className:"h-4 w-4 mr-1"}),"Create"]})]})]}),(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsxs)("button",{onClick:g,disabled:s,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center",children:[(0,r.jsx)(i.Z,{className:"h-4 w-4 mr-1 ".concat(s?"animate-spin":"")}),"Refresh Folders"]})}),(0,r.jsx)("div",{className:"mb-6",children:(0,r.jsxs)("button",{onClick:D,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 transition-colors flex items-center",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 mr-1"}),"Test Delete API"]})}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("h3",{className:"font-medium text-gray-900 mb-3",children:["Current Folders (",e.length,"):"]}),0===e.length?(0,r.jsx)("p",{className:"text-gray-500 text-sm",children:"No folders found. Create one to test deletion."}):(0,r.jsx)("div",{className:"space-y-2",children:e.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Path: ",e.fullPath," • Source: ",e.source]})]}),(0,r.jsxs)("button",{onClick:()=>j(e),disabled:s,className:"px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center",children:[(0,r.jsx)(n.Z,{className:"h-4 w-4 mr-1"}),"Delete"]})]},e.fullPath))})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,r.jsx)(u.Z,{className:"h-5 w-5 mr-2 text-green-600"}),"\uD83D\uDCCA Test Results & Logs"]}),(0,r.jsx)("button",{onClick:()=>{p([])},className:"px-3 py-1 bg-gray-500 text-white rounded text-sm hover:bg-gray-600 transition-colors",children:"Clear"})]}),(0,r.jsx)("div",{className:"bg-gray-900 text-green-400 p-4 rounded-lg font-mono text-sm max-h-96 overflow-y-auto",children:0===f.length?(0,r.jsx)("p",{className:"text-gray-500",children:"No test results yet. Perform some actions to see logs here."}):f.map((e,t)=>(0,r.jsx)("div",{className:"mb-1",children:e},t))}),(0,r.jsxs)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,r.jsx)("h3",{className:"font-medium text-blue-900 mb-2",children:"\uD83D\uDD0D How to Use This Tool:"}),(0,r.jsxs)("ol",{className:"text-sm text-blue-800 space-y-1",children:[(0,r.jsx)("li",{children:"1. Create a test folder using the input above"}),(0,r.jsx)("li",{children:"2. Try to delete the folder using the Delete button"}),(0,r.jsx)("li",{children:"3. Watch the detailed logs in the console area"}),(0,r.jsx)("li",{children:"4. Check for any error messages or failed API calls"}),(0,r.jsx)("li",{children:'5. Use "Test Delete API" to test the endpoint directly'})]})]}),(0,r.jsxs)("div",{className:"mt-4 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,r.jsx)("h3",{className:"font-medium text-yellow-900 mb-2",children:"⚠️ Common Issues:"}),(0,r.jsxs)("ul",{className:"text-sm text-yellow-800 space-y-1",children:[(0,r.jsx)("li",{children:"• API endpoint not responding (check server logs)"}),(0,r.jsx)("li",{children:"• Supabase connection issues (check credentials)"}),(0,r.jsx)("li",{children:"• Folder path encoding problems"}),(0,r.jsx)("li",{children:"• Permission issues with file system"}),(0,r.jsx)("li",{children:"• Network connectivity problems"})]})]})]})]})]})]})}},39763:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var r=s(2265),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let s=(0,r.forwardRef)((s,n)=>{let{color:o="currentColor",size:c=24,strokeWidth:i=2,absoluteStrokeWidth:d,className:u="",children:h,...m}=s;return(0,r.createElement)("svg",{ref:n,...l,width:c,height:c,stroke:o,strokeWidth:d?24*Number(i)/Number(c):i,className:["lucide","lucide-".concat(a(e)),u].join(" "),...m},[...t.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(h)?h:[h]])});return s.displayName="".concat(e),s}},63639:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},65302:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},14924:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]])},99397:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},82431:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},18930:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])}},function(e){e.O(0,[9064,2971,2117,1744],function(){return e(e.s=54990)}),_N_E=e.O()}]);