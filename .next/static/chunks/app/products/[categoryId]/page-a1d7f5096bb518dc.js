(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5737],{510:function(e,t,s){Promise.resolve().then(s.bind(s,3122)),Promise.resolve().then(s.bind(s,3726)),Promise.resolve().then(s.bind(s,8277)),Promise.resolve().then(s.bind(s,7777))},7777:function(e,t,s){"use strict";s.d(t,{default:function(){return N}});var a=s(7437),l=s(2265),r=s(9376),c=s(6151),n=s(2451),i=s(407),o=s(2489),d=s(3145),x=e=>{let{images:t,currentIndex:s,onClose:l,onNext:r,onPrevious:c,alt:x}=e;return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center",children:[(0,a.jsx)("button",{onClick:l,className:"absolute top-4 right-4 text-white hover:text-gray-300 p-2","aria-label":"Close modal",children:(0,a.jsx)(o.Z,{className:"h-8 w-8"})}),(0,a.jsxs)("div",{className:"relative max-w-7xl mx-auto px-4 w-full",children:[(0,a.jsx)(d.default,{src:t[s],alt:"".concat(x," - ").concat(s+1),width:1200,height:800,className:"max-h-[85vh] mx-auto object-contain"}),t.length>1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:c,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 p-2","aria-label":"Previous image",children:(0,a.jsx)(n.Z,{className:"h-8 w-8"})}),(0,a.jsx)("button",{onClick:r,className:"absolute right-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 p-2","aria-label":"Next image",children:(0,a.jsx)(i.Z,{className:"h-8 w-8"})})]}),(0,a.jsx)("div",{className:"absolute bottom-4 left-0 right-0",children:(0,a.jsx)("div",{className:"flex justify-center gap-2",children:t.map((e,t)=>(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(t===s?"bg-white":"bg-gray-500")},t))})})]})]})},u=e=>{let{images:t,alt:s}=e,[r,c]=(0,l.useState)(0),[o,u]=(0,l.useState)(!1),m=(0,l.useCallback)(e=>{null==e||e.stopPropagation(),c(e=>0===e?t.length-1:e-1)},[t.length]),h=(0,l.useCallback)(e=>{null==e||e.stopPropagation(),c(e=>e===t.length-1?0:e+1)},[t.length]);(0,l.useEffect)(()=>{let e=e=>{"Escape"===e.key&&o&&u(!1),"ArrowLeft"===e.key&&o&&m(),"ArrowRight"===e.key&&o&&h()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[o,h,m]);let g=e=>{c(e)};return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"relative h-full rounded-lg overflow-hidden cursor-pointer group",onClick:()=>{u(!0)},children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,a.jsx)(d.default,{src:t[r],alt:"".concat(s," - ").concat(r+1),fill:!0,className:"object-contain"})}),t.length>1&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:m,className:"absolute left-2 top-1/2 -translate-y-1/2 p-2 bg-black/50 rounded-full text-white hover:bg-black/70 transition-colors opacity-0 group-hover:opacity-100","aria-label":"Previous image",children:(0,a.jsx)(n.Z,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:h,className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-black/50 rounded-full text-white hover:bg-black/70 transition-colors opacity-0 group-hover:opacity-100","aria-label":"Next image",children:(0,a.jsx)(i.Z,{className:"h-5 w-5"})})]})]}),t.length>1&&(0,a.jsx)("div",{className:"flex gap-2 mt-4 h-16",children:t.map((e,t)=>(0,a.jsx)("button",{onClick:()=>g(t),className:"w-16 rounded-md overflow-hidden transition-all ".concat(t===r?"ring-2 ring-cyan-500 opacity-100":"opacity-60 hover:opacity-100"),children:(0,a.jsx)("div",{className:"aspect-square relative bg-gray-50",children:(0,a.jsx)(d.default,{src:e,alt:"".concat(s," thumbnail ").concat(t+1),fill:!0,className:"object-contain"})})},t))}),o&&(0,a.jsx)(x,{images:t,currentIndex:r,onClose:()=>u(!1),onNext:h,onPrevious:m,alt:s})]})},m=e=>{let{product:t}=e;return(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow p-8",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[(0,a.jsx)("div",{className:"w-full md:w-1/2 lg:w-2/5",children:(0,a.jsx)("div",{className:"aspect-square relative rounded-lg overflow-hidden bg-gray-50",children:(0,a.jsx)(u,{images:t.images,alt:t.name})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold mb-4",children:t.name}),(0,a.jsx)("p",{className:"text-gray-600 text-lg leading-relaxed mb-6",children:t.description}),t.features.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-lg mb-3",children:"Key Features:"}),(0,a.jsx)("ul",{className:"space-y-2",children:t.features.map(e=>(0,a.jsxs)("li",{className:"flex items-center text-gray-700",children:[(0,a.jsx)("span",{className:"w-2 h-2 bg-cyan-600 rounded-full mr-2"}),e]},e))})]})]})]})})},h=s(4767),g=s(2763),f=s(8870),p=e=>{let{categoryId:t}=e,[s,r]=(0,l.useState)([]),[n,i]=(0,l.useState)(!0),[o,d]=(0,l.useState)(null),{searchTerm:x,setSearchTerm:u,filteredItems:p}=(0,g.R)(s,["name","description"]),y=(0,l.useCallback)(async()=>{try{d(null);let{data:e,error:s}=await c.O.from("product_categories").select("id, slug, name").eq("slug",t).single();if(s||!e){console.log("Category not found in database:",s),d("Category not found"),r([]),i(!1);return}let{data:a,error:l}=await c.O.from("products").select("*").eq("category_id",e.id).eq("is_active",!0).order("display_order",{ascending:!0});if(l)throw l;r(a||[]),a&&0!==a.length||console.log("No products found for category:",t)}catch(e){console.error("Error fetching products:",e),d(e.message),r([])}finally{i(!1)}},[t]);return((0,l.useEffect)(()=>{y()},[y]),n)?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-cyan-600"})}):(0,a.jsx)(f.Z,{animation:"fadeIn",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Z,{value:x,onChange:u,placeholder:"Search products..."}),p.length>0?(0,a.jsx)("div",{className:"space-y-8",children:p.map(e=>{let t=e.images&&e.images.length>0?e.images:e.image_url?[e.image_url]:[];return(0,a.jsx)(m,{product:{id:e.id,name:e.name,description:e.description,short_description:e.short_description||e.description,category_id:e.category_id||"",image_url:e.image_url||"",features:e.features||[],images:t,is_active:e.is_active,display_order:e.display_order}},e.id)})}):(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-gray-500 text-lg",children:"No products found matching your search."})})]})})},y=e=>{let{category:t}=e;if(!t)return(0,a.jsx)("div",{className:"relative bg-cyan-900 text-white",children:(0,a.jsx)("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24",children:(0,a.jsx)("div",{className:"flex flex-col md:flex-row items-center gap-12",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Loading Category..."}),(0,a.jsx)("p",{className:"text-xl text-cyan-100 leading-relaxed max-w-2xl",children:"Please wait while we load the category information."})]})})})});let s=t.image_url||"https://images.unsplash.com/photo-1441986300917-64674bd600d8?auto=format&fit=crop&w=2000",l=t.name||"Unknown Category",r=t.description||"No description available";return(0,a.jsxs)("div",{className:"relative bg-cyan-900 text-white",children:[(0,a.jsx)("div",{className:"absolute inset-0 z-0",children:(0,a.jsx)(d.default,{src:s,alt:l,fill:!0,className:"object-cover opacity-50",priority:!0})}),(0,a.jsx)("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24",children:(0,a.jsx)("div",{className:"flex flex-col md:flex-row items-center gap-12",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:l}),(0,a.jsx)("p",{className:"text-xl text-cyan-100 leading-relaxed max-w-2xl",children:r})]})})})]})},j=e=>{let{products:t}=e,{searchTerm:s,setSearchTerm:l,filteredItems:r}=(0,g.R)(t,["name","description"]);return(0,a.jsx)(f.Z,{animation:"fadeIn",children:(0,a.jsxs)("div",{children:[(0,a.jsx)(h.Z,{value:s,onChange:l,placeholder:"Search products..."}),r.length>0?(0,a.jsx)("div",{className:"space-y-8",children:r.map(e=>(0,a.jsx)(m,{product:e},e.id))}):(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-gray-500 text-lg",children:"No products found matching your search."})})]})})},v=s(2660),b=e=>{let{categoryId:t}=e,s=(0,r.useRouter)(),[n,i]=(0,l.useState)(null),[o,d]=(0,l.useState)([]),[x,u]=(0,l.useState)(!0);(0,l.useEffect)(()=>{m()},[t]);let m=async()=>{try{let[e,s]=await Promise.all([c.O.from("product_categories").select("*").eq("id",t).single(),c.O.from("products").select("*").eq("category_id",t).eq("is_active",!0).order("display_order",{ascending:!0})]);e.error?(console.error("Error fetching category:",e.error),i(null)):i(e.data),s.error?(console.error("Error fetching products:",s.error),d([])):d(s.data||[])}catch(e){console.error("Error:",e),i(null),d([])}finally{u(!1)}};return x?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-cyan-600"})}):n?(0,a.jsxs)("div",{children:[(0,a.jsx)(y,{category:n}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 mb-8",children:[(0,a.jsx)("button",{onClick:()=>s.push("/products"),className:"flex items-center justify-center w-10 h-10 rounded-full bg-cyan-50 text-cyan-600 hover:bg-cyan-100 transition-colors",children:(0,a.jsx)(v.Z,{className:"h-5 w-5"})}),(0,a.jsx)("span",{className:"text-gray-600",children:"Back to categories"})]}),(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Demo Mode"}),(0,a.jsx)("div",{className:"mt-2 text-sm text-yellow-700",children:(0,a.jsx)("p",{children:"You're viewing demo products. Database connection is not available."})})]})]})}),(0,a.jsx)(j,{products:o})]})]}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Category not found"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-8",children:['The category "',t,'" could not be found.']}),(0,a.jsx)("button",{onClick:()=>s.push("/products"),className:"bg-cyan-600 text-white px-6 py-3 rounded-lg hover:bg-cyan-700 transition-colors",children:"Back to Products"})]})})},N=e=>{let{categoryId:t}=e,s=(0,r.useRouter)(),[n,i]=(0,l.useState)(null),[o,d]=(0,l.useState)(!0),[x,u]=(0,l.useState)(null),m=(0,l.useCallback)(async()=>{try{u(null),console.log("Fetching category with ID/slug:",t);let{data:e,error:s}=await c.O.from("product_categories").select("*").eq("slug","".concat(t)).eq("is_active",!0).single();if(console.log("Category query result:",{data:e,error:s}),s)throw s;i(e),console.log("Category set successfully:",e)}catch(e){console.error("Error fetching category:",e),u(e.message),i(null)}finally{d(!1)}},[t]);return((0,l.useEffect)(()=>{m()},[m]),o)?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-cyan-600"})}):x||!n?(console.log("Falling back to CategoryDetailFallback due to:",x||"Category not found"),(0,a.jsx)(b,{categoryId:t})):(0,a.jsxs)("div",{children:[(0,a.jsx)(y,{category:n}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 mb-8",children:[(0,a.jsx)("button",{onClick:()=>s.push("/products"),className:"flex items-center justify-center w-10 h-10 rounded-full bg-cyan-50 text-cyan-600 hover:bg-cyan-100 transition-colors",children:(0,a.jsx)(v.Z,{className:"h-5 w-5"})}),(0,a.jsx)("span",{className:"text-gray-600",children:"Back to categories"})]}),(0,a.jsx)(p,{categoryId:t})]})]})}},4767:function(e,t,s){"use strict";var a=s(7437);s(2265);var l=s(3247);t.Z=e=>{let{value:t,onChange:s,placeholder:r="Search categories..."}=e;return(0,a.jsxs)("div",{className:"relative max-w-2xl mx-auto mb-12",children:[(0,a.jsx)("input",{type:"text",placeholder:r,value:t,onChange:e=>s(e.target.value),className:"w-full pl-12 pr-4 py-4 rounded-xl border border-gray-200 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 transition-colors text-lg"}),(0,a.jsx)(l.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-6 w-6 text-gray-400"})]})}},2763:function(e,t,s){"use strict";s.d(t,{R:function(){return l}});var a=s(2265);let l=(e,t)=>{let[s,l]=(0,a.useState)(""),r=(0,a.useMemo)(()=>{if(!s.trim())return e;let a=s.toLowerCase();return e.filter(e=>t.some(t=>{let s=e[t];return s&&s.toString().toLowerCase().includes(a)}))},[e,s,t]);return{searchTerm:s,setSearchTerm:l,filteredItems:r}}},2660:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2451:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},407:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},3247:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(9763).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])}},function(e){e.O(0,[6580,3847,7648,3528,6119,2971,2117,1744],function(){return e(e.s=510)}),_N_E=e.O()}]);