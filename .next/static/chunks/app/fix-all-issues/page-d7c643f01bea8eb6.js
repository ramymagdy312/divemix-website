(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3268],{4191:function(e,a,n){Promise.resolve().then(n.bind(n,5691))},5691:function(e,a,n){"use strict";n.r(a),n.d(a,{default:function(){return i}});var t=n(7437),s=n(2265),c=n(6151);function i(){let[e,a]=(0,s.useState)(""),[n,i]=(0,s.useState)(!1),o=async()=>{i(!0),a("Starting comprehensive issue fixing...\n");let e="https://ilxfqrxybtcftioizoan.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlseGZxcnh5YnRjZnRpb2l6b2FuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM4NTg5MjMsImV4cCI6MjA2OTQzNDkyM30.Jhjy7136xlqHcVjeCGPDvh4Ofpio3a09Y2fFu2Sqqh0";try{a(e=>e+"1. Testing Supabase connection...\n");let{data:t,error:s}=await c.O.from("gallery_images").select("count").limit(1);s?(a(e=>e+"❌ Supabase connection failed: ".concat(s.message,"\n")),a(e=>e+"⚠️ Running in development mode with mock data\n")):a(e=>e+"✅ Supabase connection successful\n"),a(e=>e+"2. Creating/updating database functions...\n");try{await c.O.rpc("exec_sql",{sql:"\n            CREATE OR REPLACE FUNCTION update_updated_at_column()\n            RETURNS TRIGGER AS $$\n            BEGIN\n                NEW.updated_at = NOW();\n                RETURN NEW;\n            END;\n            $$ language 'plpgsql';\n          "}),a(e=>e+"✅ Database functions created\n")}catch(e){a(a=>a+"⚠️ Function creation skipped: ".concat(e.message,"\n"))}for(let e of(a(e=>e+"3. Checking table structures...\n"),["product_categories","products","services","applications","gallery_categories","gallery_images","products_page","services_page","applications_page"]))try{let{data:n,error:t}=await c.O.from(e).select("*").limit(1);t?a(a=>a+"❌ Table ".concat(e," has issues: ").concat(t.message,"\n")):a(a=>a+"✅ Table ".concat(e," is accessible\n"))}catch(n){a(a=>a+"❌ Table ".concat(e," error: ").concat(n.message,"\n"))}a(e=>e+"4. Testing component data retrieval...\n");try{let{data:e,error:n}=await c.O.from("product_categories").select("*").eq("is_active",!0).order("display_order",{ascending:!0});n?a(e=>e+"❌ Product categories error: ".concat(n.message,"\n")):a(a=>a+"✅ Product categories: ".concat((null==e?void 0:e.length)||0," found\n"))}catch(e){a(a=>a+"❌ Product categories test failed: ".concat(e.message,"\n"))}try{let{data:e,error:n}=await c.O.from("services").select("*").eq("is_active",!0).order("display_order",{ascending:!0});n?a(e=>e+"❌ Services error: ".concat(n.message,"\n")):a(a=>a+"✅ Services: ".concat((null==e?void 0:e.length)||0," found\n"))}catch(e){a(a=>a+"❌ Services test failed: ".concat(e.message,"\n"))}try{let{data:e,error:n}=await c.O.from("applications").select("*").eq("is_active",!0).order("display_order",{ascending:!0});n?a(e=>e+"❌ Applications error: ".concat(n.message,"\n")):a(a=>a+"✅ Applications: ".concat((null==e?void 0:e.length)||0," found\n"))}catch(e){a(a=>a+"❌ Applications test failed: ".concat(e.message,"\n"))}try{let{data:e,error:n}=await c.O.from("gallery_images").select("*").order("created_at",{ascending:!1});n?a(e=>e+"❌ Gallery error: ".concat(n.message,"\n")):a(a=>a+"✅ Gallery images: ".concat((null==e?void 0:e.length)||0," found\n"))}catch(e){a(a=>a+"❌ Gallery test failed: ".concat(e.message,"\n"))}for(let e of(a(e=>e+"5. Testing page content...\n"),["products_page","services_page","applications_page"]))try{let{data:n,error:t}=await c.O.from(e).select("*").single();t?a(a=>a+"❌ ".concat(e," error: ").concat(t.message,"\n")):a(a=>a+"✅ ".concat(e," content loaded\n"))}catch(n){a(a=>a+"❌ ".concat(e," test failed: ").concat(n.message,"\n"))}a(e=>e+"6. Checking environment configuration...\n"),e&&n?(a(e=>e+"✅ Environment variables configured\n"),a(a=>a+"   URL: ".concat(e,"\n")),a(e=>e+"   Key: ".concat(n.substring(0,20),"...\n"))):a(e=>e+"❌ Environment variables not set\n"),a(e=>e+"7. Checking component compatibility...\n");let i=[];for(let[e,a]of Object.entries({product_categories:["name","description","slug","image_url","is_active","display_order"],services:["name","description","icon","features","is_active","display_order"],applications:["name","description","image_url","industry","use_cases","benefits","is_active","display_order"]}))try{let{data:n,error:t}=await c.O.from(e).select(a.join(",")).limit(1);t&&i.push("".concat(e,": ").concat(t.message))}catch(a){i.push("".concat(e,": ").concat(a.message))}i.length>0?(a(e=>e+"❌ Component compatibility issues found:\n"),i.forEach(e=>{a(a=>a+"   - ".concat(e,"\n"))})):a(e=>e+"✅ All components compatible with database schema\n"),a(e=>e+"\n\uD83D\uDD0D DIAGNOSTIC SUMMARY:\n"),a(e=>e+"================================\n"),s?(a(e=>e+"\uD83D\uDD34 STATUS: DEVELOPMENT MODE\n"),a(e=>e+"   - Supabase not connected\n"),a(e=>e+"   - Using fallback/mock data\n"),a(e=>e+"   - Components will show empty states\n"),a(e=>e+"\n\uD83D\uDCA1 TO FIX:\n"),a(e=>e+"   1. Run setup-all-db to create tables\n"),a(e=>e+"   2. Check Supabase configuration\n"),a(e=>e+"   3. Verify environment variables\n")):(a(e=>e+"\uD83D\uDFE2 STATUS: DATABASE CONNECTED\n"),a(e=>e+"   - All tables accessible\n"),a(e=>e+"   - Components should work properly\n"),a(e=>e+"   - Data retrieval functional\n")),a(e=>e+"\n\uD83D\uDE80 NEXT STEPS:\n"),a(e=>e+"   1. Visit /setup-all-db if tables are empty\n"),a(e=>e+"   2. Test each page: /products, /services, /applications, /gallery\n"),a(e=>e+"   3. Check admin panel: /admin\n"),a(e=>e+"   4. Verify image uploads work\n")}catch(e){console.error("Fix process error:",e),a(a=>a+"❌ Critical error: ".concat(e.message,"\n"))}finally{i(!1)}};return(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"\uD83D\uDD27 Project Issue Diagnostics & Fixes"}),(0,t.jsxs)("div",{className:"mb-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"What this tool does:"}),(0,t.jsxs)("ul",{className:"list-disc list-inside text-yellow-700 space-y-1",children:[(0,t.jsx)("li",{children:"Tests Supabase database connection"}),(0,t.jsx)("li",{children:"Verifies all table structures and accessibility"}),(0,t.jsx)("li",{children:"Checks component compatibility with database schema"}),(0,t.jsx)("li",{children:"Tests data retrieval for all major components"}),(0,t.jsx)("li",{children:"Validates environment configuration"}),(0,t.jsx)("li",{children:"Provides actionable recommendations"})]})]}),(0,t.jsx)("button",{onClick:o,disabled:n,className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 disabled:opacity-50 mb-6 text-lg font-semibold",children:n?"\uD83D\uDD0D Running Diagnostics...":"\uD83D\uDE80 Run Full Diagnostic"}),e&&(0,t.jsxs)("div",{className:"bg-gray-900 text-green-400 p-6 rounded-lg font-mono text-sm",children:[(0,t.jsx)("h2",{className:"text-lg mb-4 text-white",children:"\uD83D\uDCCA Diagnostic Results:"}),(0,t.jsx)("pre",{className:"whitespace-pre-wrap max-h-96 overflow-y-auto",children:e})]})]})}},6151:function(e,a,n){"use strict";n.d(a,{O:function(){return i},e:function(){return o}});var t=n(6580);let s="https://ilxfqrxybtcftioizoan.supabase.co",c="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlseGZxcnh5YnRjZnRpb2l6b2FuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM4NTg5MjMsImV4cCI6MjA2OTQzNDkyM30.Jhjy7136xlqHcVjeCGPDvh4Ofpio3a09Y2fFu2Sqqh0";s||console.warn("Supabase URL not configured properly. Using fallback configuration."),c||console.warn("Supabase Anon Key not configured properly. Using fallback configuration.");let i=(0,t.eI)(s||"https://placeholder.supabase.co",c||"placeholder-key"),o=()=>(0,t.eI)(s||"https://placeholder.supabase.co",c||"placeholder-key")}},function(e){e.O(0,[6580,2971,2117,1744],function(){return e(e.s=4191)}),_N_E=e.O()}]);