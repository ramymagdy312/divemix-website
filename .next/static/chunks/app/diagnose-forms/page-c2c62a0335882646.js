(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1924],{2053:function(e,s,i){Promise.resolve().then(i.bind(i,5145))},5145:function(e,s,i){"use strict";i.r(s),i.d(s,{default:function(){return r}});var t=i(7437),n=i(2265),a=i(6151);function r(){let[e,s]=(0,n.useState)(""),[i,r]=(0,n.useState)(!1),c=async()=>{r(!0),s("\uD83D\uDD0D Starting Forms Diagnosis...\n\n");try{s(e=>e+"1. Checking table structures...\n");try{let{data:e,error:i}=await a.O.from("applications").select("*").limit(1);if(i)s(e=>e+"   ❌ Applications table error: ".concat(i.message,"\n"));else{let i=null==e?void 0:e[0];if(i){let e=Object.keys(i);s(s=>s+"   ✅ Applications table fields: ".concat(e.join(", "),"\n"));let t=["name","description","image_url","use_cases","benefits","is_active","display_order"].filter(s=>!e.includes(s));t.length>0&&s(e=>e+"   ⚠️  Missing fields: ".concat(t.join(", "),"\n"))}else s(e=>e+"   ℹ️  Applications table is empty\n")}}catch(e){s(s=>s+"   ❌ Applications table check failed: ".concat(e.message,"\n"))}try{let{data:e,error:i}=await a.O.from("services").select("*").limit(1);if(i)s(e=>e+"   ❌ Services table error: ".concat(i.message,"\n"));else{let i=null==e?void 0:e[0];if(i){let e=Object.keys(i);s(s=>s+"   ✅ Services table fields: ".concat(e.join(", "),"\n"));let t=["name","description","icon","features","is_active","display_order"].filter(s=>!e.includes(s));t.length>0&&s(e=>e+"   ⚠️  Missing fields: ".concat(t.join(", "),"\n"))}else s(e=>e+"   ℹ️  Services table is empty\n")}}catch(e){s(s=>s+"   ❌ Services table check failed: ".concat(e.message,"\n"))}s(e=>e+"\n"),s(e=>e+"2. Testing data insertion...\n");try{let{data:e,error:i}=await a.O.from("applications").insert([{name:"Test Application",description:"Test description",image_url:"https://example.com/test.jpg",use_cases:["Test use case"],benefits:["Test benefit"],is_active:!0,display_order:999}]).select().single();i?(s(e=>e+"   ❌ Application insert failed: ".concat(i.message,"\n")),s(e=>e+"   \uD83D\uDCA1 Error details: ".concat(JSON.stringify(i,null,2),"\n"))):(s(e=>e+"   ✅ Application insert successful\n"),await a.O.from("applications").delete().eq("id",e.id),s(e=>e+"   \uD83E\uDDF9 Test data cleaned up\n"))}catch(e){s(s=>s+"   ❌ Application insert test failed: ".concat(e.message,"\n"))}try{let{data:e,error:i}=await a.O.from("services").insert([{name:"Test Service",description:"Test description",icon:"\uD83D\uDD27",features:["Test feature"],is_active:!0,display_order:999}]).select().single();i?(s(e=>e+"   ❌ Service insert failed: ".concat(i.message,"\n")),s(e=>e+"   \uD83D\uDCA1 Error details: ".concat(JSON.stringify(i,null,2),"\n"))):(s(e=>e+"   ✅ Service insert successful\n"),await a.O.from("services").delete().eq("id",e.id),s(e=>e+"   \uD83E\uDDF9 Test data cleaned up\n"))}catch(e){s(s=>s+"   ❌ Service insert test failed: ".concat(e.message,"\n"))}s(e=>e+"\n"),s(e=>e+"3. Checking Row Level Security (RLS) policies...\n");try{let{data:e,error:i}=await a.O.from("applications").select("id").limit(1);i?(s(e=>e+"   ⚠️  RLS might be blocking access: ".concat(i.message,"\n")),s(e=>e+"   \uD83D\uDCA1 Solution: Disable RLS or add proper policies\n")):s(e=>e+"   ✅ Public read access working\n")}catch(e){s(s=>s+"   ❌ RLS check failed: ".concat(e.message,"\n"))}s(e=>e+"\n"),s(e=>e+"4. Checking for common form issues...\n");try{s(e=>e+"   ℹ️  Note: Forms now use image_url instead of ImageUploader\n"),s(e=>e+"   ℹ️  Note: Applications use use_cases and benefits arrays\n"),s(e=>e+"   ℹ️  Note: Services use name instead of title\n")}catch(e){s(s=>s+"   ❌ Component check failed: ".concat(e.message,"\n"))}s(e=>e+"\n\uD83C\uDF89 Diagnosis Complete!\n\n"),s(e=>e+"\uD83D\uDCCB Summary & Recommendations:\n"),s(e=>e+"• If insert tests failed, check database schema\n"),s(e=>e+"• If RLS errors occur, check Supabase policies\n"),s(e=>e+"• Make sure all required fields are present\n"),s(e=>e+"• Test forms manually after running this diagnosis\n\n"),s(e=>e+"\uD83D\uDE80 Next Steps:\n"),s(e=>e+"1. Visit /admin/applications/new to test application form\n"),s(e=>e+"2. Visit /admin/services/new to test service form\n"),s(e=>e+"3. Check browser console for any JavaScript errors\n"),s(e=>e+"4. If issues persist, check Supabase dashboard\n")}catch(e){s(s=>s+"\n❌ Diagnosis failed: ".concat(e.message,"\n"))}finally{r(!1)}};return(0,t.jsxs)("div",{className:"p-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"\uD83D\uDD0D Forms Error Diagnosis"}),(0,t.jsxs)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"\uD83D\uDEA8 Form Errors Detected"}),(0,t.jsx)("p",{className:"text-red-700 mb-2",children:"Running comprehensive diagnosis to identify the root cause of form submission errors."}),(0,t.jsxs)("div",{className:"text-sm text-red-600",children:[(0,t.jsx)("strong",{children:"This tool will check:"}),(0,t.jsxs)("ul",{className:"mt-1 space-y-1",children:[(0,t.jsx)("li",{children:"• Database table structures and field names"}),(0,t.jsx)("li",{children:"• Data insertion capabilities"}),(0,t.jsx)("li",{children:"• Row Level Security (RLS) policies"}),(0,t.jsx)("li",{children:"• Common form configuration issues"})]})]})]}),(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("button",{onClick:c,disabled:i,className:"bg-red-600 text-white px-8 py-3 rounded-lg hover:bg-red-700 disabled:opacity-50 text-lg font-semibold",children:i?"\uD83D\uDD0D Running Diagnosis...":"\uD83D\uDE80 Start Diagnosis"})}),e&&(0,t.jsxs)("div",{className:"bg-gray-900 text-green-400 p-6 rounded-lg font-mono text-sm",children:[(0,t.jsx)("h2",{className:"text-lg mb-4 text-white",children:"\uD83D\uDD0D Diagnosis Results:"}),(0,t.jsx)("pre",{className:"whitespace-pre-wrap max-h-96 overflow-y-auto",children:e})]}),(0,t.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"\uD83D\uDD27 Common Issues & Solutions:"}),(0,t.jsxs)("ul",{className:"text-sm text-blue-700 space-y-2",children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Field name mismatch:"})," Check if database fields match form fields"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Missing required fields:"})," Ensure all required columns exist"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"RLS policies:"})," Check if Row Level Security is blocking inserts"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Data type errors:"})," Verify array fields are properly formatted"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Validation errors:"})," Check for missing or invalid data"]})]})]}),(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-green-800 mb-2",children:"✅ Expected Results:"}),(0,t.jsxs)("ul",{className:"text-sm text-green-700 space-y-2",children:[(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Table structures:"})," All required fields present"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Data insertion:"})," Test records insert successfully"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"RLS policies:"})," No blocking policies for inserts"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Form compatibility:"})," All fields match database schema"]}),(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:"Clean operation:"})," Test data cleaned up automatically"]})]})]})]})]})}},6151:function(e,s,i){"use strict";i.d(s,{O:function(){return r}});var t=i(6580);let n="https://ilxfqrxybtcftioizoan.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlseGZxcnh5YnRjZnRpb2l6b2FuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM4NTg5MjMsImV4cCI6MjA2OTQzNDkyM30.Jhjy7136xlqHcVjeCGPDvh4Ofpio3a09Y2fFu2Sqqh0";n||console.warn("Supabase URL not configured properly. Using fallback configuration."),a||console.warn("Supabase Anon Key not configured properly. Using fallback configuration.");let r=(0,t.eI)(n||"https://placeholder.supabase.co",a||"placeholder-key")}},function(e){e.O(0,[6580,2971,2117,1744],function(){return e(e.s=2053)}),_N_E=e.O()}]);