(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[883],{3227:function(e,t,r){Promise.resolve().then(r.bind(r,4678))},4678:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var s=r(7437),n=r(2265),a=r(9376),i=r(6151),c=r(9397),l=r(2489);function o(e){let{params:t}=e,r=(0,a.useRouter)(),[o,u]=(0,n.useState)(!1),[d,f]=(0,n.useState)(null),[h,p]=(0,n.useState)(!0),[x,m]=(0,n.useState)({title:"",description:"",icon:"Settings",features:[""]});(0,n.useEffect)(()=>{y()},[t.id]);let y=async()=>{try{var e;let{data:r,error:s}=await i.O.from("services").select("*").eq("id",t.id).single();if(s){console.error("Error fetching service:",s),alert("Error fetching service data");return}f(r),m({title:r.title||"",description:r.description||"",icon:r.icon||"Settings",features:(null===(e=r.features)||void 0===e?void 0:e.length)>0?r.features:[""]})}catch(e){console.error("Error fetching service:",e),alert("Error fetching service data")}finally{p(!1)}},v=async e=>{e.preventDefault(),u(!0);try{let e={...x,features:x.features.filter(e=>""!==e.trim())},{error:s}=await i.O.from("services").update(e).eq("id",t.id);if(s){console.error("Error updating service:",s),alert("Error updating service");return}alert("Service updated successfully!"),r.push("/admin/services")}catch(e){console.error("Error updating service:",e),alert("Error updating service")}finally{u(!1)}},b=e=>{m({...x,features:x.features.filter((t,r)=>r!==e)})},g=(e,t)=>{let r=[...x.features];r[e]=t,m({...x,features:r})};return h?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-cyan-600"})}):d?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Edit Service"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:"Edit service data"})]}),(0,s.jsxs)("form",{onSubmit:v,className:"space-y-6 bg-white shadow rounded-lg p-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Service Title"}),(0,s.jsx)("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-cyan-500 focus:border-cyan-500",value:x.title,onChange:e=>m({...x,title:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,s.jsx)("textarea",{required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-cyan-500 focus:border-cyan-500",value:x.description,onChange:e=>m({...x,description:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Icon"}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-cyan-500 focus:border-cyan-500",value:x.icon,onChange:e=>m({...x,icon:e.target.value}),children:[(0,s.jsx)("option",{value:"Settings",children:"Settings"}),(0,s.jsx)("option",{value:"Wrench",children:"Wrench"}),(0,s.jsx)("option",{value:"Droplets",children:"Droplets"}),(0,s.jsx)("option",{value:"FireExtinguisher",children:"FireExtinguisher"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Features"}),(0,s.jsxs)("button",{type:"button",onClick:()=>{m({...x,features:[...x.features,""]})},className:"inline-flex items-center px-3 py-1 text-sm bg-cyan-600 text-white rounded-md hover:bg-cyan-700",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4 mr-1"}),"Add Feature"]})]}),(0,s.jsx)("div",{className:"space-y-2",children:x.features.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"text",placeholder:"Service Feature",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-cyan-500 focus:border-cyan-500",value:e,onChange:e=>g(t,e.target.value)}),x.features.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>b(t),className:"p-2 text-red-600 hover:text-red-800",children:(0,s.jsx)(l.Z,{className:"h-4 w-4"})})]},t))})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>r.push("/admin/services"),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-cyan-600 text-white rounded-md hover:bg-cyan-700 transition-colors disabled:opacity-50",children:o?"Saving...":"Save"})]})]})]}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("p",{className:"text-gray-500",children:"Service not found"}),(0,s.jsx)("button",{onClick:()=>r.push("/admin/services"),className:"mt-4 px-4 py-2 bg-cyan-600 text-white rounded-md hover:bg-cyan-700",children:"Back to Services"})]})}},6151:function(e,t,r){"use strict";r.d(t,{O:function(){return c}});var s=r(6580),n=r(257);let a=n.env.NEXT_PUBLIC_SUPABASE_URL,i=n.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;a&&"your-supabase-url"!==a||console.warn("Supabase URL not configured properly. Using fallback configuration."),i&&"your-supabase-anon-key"!==i||console.warn("Supabase Anon Key not configured properly. Using fallback configuration.");let c=(0,s.eI)(a||"https://placeholder.supabase.co",i||"placeholder-key")},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},2489:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})}},function(e){e.O(0,[844,971,117,744],function(){return e(e.s=3227)}),_N_E=e.O()}]);