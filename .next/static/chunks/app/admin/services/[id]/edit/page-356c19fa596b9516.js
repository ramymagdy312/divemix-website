(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[883],{5792:function(e,t,r){Promise.resolve().then(r.bind(r,4678))},4678:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var s=r(7437),n=r(2265),a=r(9376),i=r(6151),c=r(9397),l=r(2489);function o(e){let{params:t}=e,r=(0,a.useRouter)(),[o,u]=(0,n.useState)(!1),[d,h]=(0,n.useState)(null),[f,x]=(0,n.useState)(!0),[m,p]=(0,n.useState)({title:"",description:"",icon:"Settings",features:[""]});(0,n.useEffect)(()=>{y()},[t.id]);let y=async()=>{try{var e;let{data:r,error:s}=await i.O.from("services").select("*").eq("id",t.id).single();if(s){console.error("Error fetching service:",s),alert("حدث خطأ أثناء جلب بيانات الخدمة");return}h(r),p({title:r.title||"",description:r.description||"",icon:r.icon||"Settings",features:(null===(e=r.features)||void 0===e?void 0:e.length)>0?r.features:[""]})}catch(e){console.error("Error fetching service:",e),alert("حدث خطأ أثناء جلب بيانات الخدمة")}finally{x(!1)}},b=async e=>{e.preventDefault(),u(!0);try{let e={...m,features:m.features.filter(e=>""!==e.trim())},{error:s}=await i.O.from("services").update(e).eq("id",t.id);if(s){console.error("Error updating service:",s),alert("حدث خطأ أثناء تحديث الخدمة");return}alert("تم تحديث الخدمة بنجاح!"),r.push("/admin/services")}catch(e){console.error("Error updating service:",e),alert("حدث خطأ أثناء تحديث الخدمة")}finally{u(!1)}},g=e=>{p({...m,features:m.features.filter((t,r)=>r!==e)})},v=(e,t)=>{let r=[...m.features];r[e]=t,p({...m,features:r})};return f?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-cyan-600"})}):d?(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"تعديل الخدمة"}),(0,s.jsx)("p",{className:"mt-2 text-gray-600",children:"تعديل بيانات الخدمة"})]}),(0,s.jsxs)("form",{onSubmit:b,className:"space-y-6 bg-white shadow rounded-lg p-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"عنوان الخدمة"}),(0,s.jsx)("input",{type:"text",required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-cyan-500 focus:border-cyan-500",value:m.title,onChange:e=>p({...m,title:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الوصف"}),(0,s.jsx)("textarea",{required:!0,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-cyan-500 focus:border-cyan-500",value:m.description,onChange:e=>p({...m,description:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الأيقونة"}),(0,s.jsxs)("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-cyan-500 focus:border-cyan-500",value:m.icon,onChange:e=>p({...m,icon:e.target.value}),children:[(0,s.jsx)("option",{value:"Settings",children:"Settings"}),(0,s.jsx)("option",{value:"Wrench",children:"Wrench"}),(0,s.jsx)("option",{value:"Droplets",children:"Droplets"}),(0,s.jsx)("option",{value:"FireExtinguisher",children:"FireExtinguisher"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"المميزات"}),(0,s.jsxs)("button",{type:"button",onClick:()=>{p({...m,features:[...m.features,""]})},className:"inline-flex items-center px-3 py-1 text-sm bg-cyan-600 text-white rounded-md hover:bg-cyan-700",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4 mr-1"}),"إضافة ميزة"]})]}),(0,s.jsx)("div",{className:"space-y-2",children:m.features.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"text",placeholder:"ميزة الخدمة",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:ring-cyan-500 focus:border-cyan-500",value:e,onChange:e=>v(t,e.target.value)}),m.features.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>g(t),className:"p-2 text-red-600 hover:text-red-800",children:(0,s.jsx)(l.Z,{className:"h-4 w-4"})})]},t))})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>r.push("/admin/services"),className:"px-4 py-2 text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"إلغاء"}),(0,s.jsx)("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-cyan-600 text-white rounded-md hover:bg-cyan-700 transition-colors disabled:opacity-50",children:o?"جاري الحفظ...":"حفظ"})]})]})]}):(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("p",{className:"text-gray-500",children:"الخدمة غير موجودة"}),(0,s.jsx)("button",{onClick:()=>r.push("/admin/services"),className:"mt-4 px-4 py-2 bg-cyan-600 text-white rounded-md hover:bg-cyan-700",children:"العودة للخدمات"})]})}},6151:function(e,t,r){"use strict";r.d(t,{O:function(){return i}});var s=r(6580);let n="https://ilxfqrxybtcftioizoan.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlseGZxcnh5YnRjZnRpb2l6b2FuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM4NTg5MjMsImV4cCI6MjA2OTQzNDkyM30.Jhjy7136xlqHcVjeCGPDvh4Ofpio3a09Y2fFu2Sqqh0";n||console.warn("Supabase URL not configured properly. Using fallback configuration."),a||console.warn("Supabase Anon Key not configured properly. Using fallback configuration.");let i=(0,s.eI)(n||"https://placeholder.supabase.co",a||"placeholder-key")},9397:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},2489:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}})}},function(e){e.O(0,[844,971,117,744],function(){return e(e.s=5792)}),_N_E=e.O()}]);