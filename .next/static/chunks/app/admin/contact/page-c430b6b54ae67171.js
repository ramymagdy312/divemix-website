(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9109],{46076:function(e,r,s){Promise.resolve().then(s.bind(s,34616))},34616:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return b}});var a=s(57437),t=s(2265),n=s(86151),l=s(92595),i=s(34029),c=s(81973),o=s(46393),d=s(15353),u=s(49665),h=s(99397),x=s(83774),m=s(18930),g=s(69064),f=s(76771),p=s(77060),v=s(97976),j=s(87609);function b(){let[e,r]=(0,t.useState)(null),[s,b]=(0,t.useState)(!0),[y,N]=(0,t.useState)(!1),[_,w]=(0,t.useState)(!1);(0,t.useEffect)(()=>{k()},[]);let k=async()=>{try{let{data:e,error:s}=await n.O.from("contact_page").select("*").single();s?(console.error("Error fetching contact data:",s),r(null)):r(e)}catch(e){console.error("Error:",e),r(null)}finally{b(!1)}},C=async()=>{N(!0);try{let{error:r}=await n.O.from("contact_page").upsert({...e||{},updated_at:new Date().toISOString()});r?(console.error("Error saving contact data:",r),g.ZP.error("Error saving data")):(w(!1),g.ZP.success("Contact page updated successfully!"))}catch(e){console.error("Error:",e),g.ZP.error("Error saving data")}finally{N(!1)}},E=s=>{e&&r({...e,branches:((null==e?void 0:e.branches)||[]).filter((e,r)=>r!==s)})},Z=e=>{try{let r=e.match(/@(-?\d+\.\d+),(-?\d+\.\d+)/);if(r)return{lat:parseFloat(r[1]),lng:parseFloat(r[2])};let s=e.match(/!3d(-?\d+\.\d+)!4d(-?\d+\.\d+)/);if(s)return{lat:parseFloat(s[1]),lng:parseFloat(s[2])}}catch(e){console.error("Error extracting coordinates:",e)}return null},S=(s,a,t)=>{if(!e)return;let n=[...(null==e?void 0:e.branches)||[]];if("lat"===a||"lng"===a)n[s]={...n[s],coordinates:{...n[s].coordinates,[a]:Number(t)}};else if("map_url"===a){let e=Z(t);n[s]={...n[s],[a]:t,...e&&{coordinates:{lat:e.lat,lng:e.lng}}}}else n[s]={...n[s],[a]:t};r({...e,branches:n})};return s?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-cyan-600"})}):(0,a.jsxs)("div",{children:[(0,a.jsx)(p.Z,{items:[{name:"Pages"},{name:"Contact Page"}]}),(0,a.jsx)(v.Z,{title:"Contact Page",editing:_,setEditing:w,saving:y,handleSave:C}),(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsx)(f.Z,{data:e,editing:_,setData:r}),(0,a.jsx)(j.Z,{editing:_,data:e,setData:r}),(0,a.jsx)(i.Zb,{children:(0,a.jsxs)(i.Ol,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.ll,{children:"Branch Locations"}),(0,a.jsx)(i.SZ,{children:"Manage your company branch locations and contact information"})]}),_&&(0,a.jsxs)(l.z,{variant:"outline",size:"sm",onClick:()=>{e&&r({...e,branches:[...null==e?void 0:e.branches,{name:"",address:"",phone:"",email:"",show_in_footer:!1,map_url:"",coordinates:{lat:0,lng:0}}]})},children:[(0,a.jsx)(h.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Add Branch"})]})]}),(0,a.jsx)("div",{className:"space-y-6",children:null==e?void 0:e.branches.map((e,r)=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x.Z,{className:"h-5 w-5 text-cyan-600"}),(0,a.jsxs)("h3",{className:"text-lg font-medium",children:["Branch ",r+1]})]}),_&&(0,a.jsx)("button",{onClick:()=>E(r),className:"text-red-600 hover:text-red-800",children:(0,a.jsx)(m.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(o._,{children:"Branch Name"}),_?(0,a.jsx)(c.I,{type:"text",value:e.name,onChange:e=>S(r,"name",e.target.value)}):(0,a.jsx)("p",{className:"mt-6 border-l-2 pl-6 italic",children:e.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o._,{children:"Show in Footer"}),_?(0,a.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,a.jsx)(d.r,{checked:e.show_in_footer||!1,onCheckedChange:e=>S(r,"show_in_footer",e)}),(0,a.jsx)(o._,{className:"text-sm",children:"Display this branch in the website footer"})]}):(0,a.jsx)("p",{className:"text-gray-900",children:e.show_in_footer?(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Shown in Footer"}):(0,a.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Hidden from Footer"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o._,{children:"Phone"}),_?(0,a.jsx)(c.I,{type:"tel",value:e.phone,onChange:e=>S(r,"phone",e.target.value)}):(0,a.jsx)("p",{className:"mt-6 border-l-2 pl-6 italic",children:e.phone})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o._,{children:"Email"}),_?(0,a.jsx)(c.I,{type:"email",value:e.email,onChange:e=>S(r,"email",e.target.value)}):(0,a.jsx)("p",{className:"mt-6 border-l-2 pl-6 italic",children:e.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o._,{children:"Address"}),_?(0,a.jsx)(u.g,{value:e.address,onChange:e=>S(r,"address",e.target.value),rows:2}):(0,a.jsx)("p",{className:"mt-6 border-l-2 pl-6 italic",children:e.address})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(o._,{children:"Google Maps Link"}),_?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.I,{type:"url",value:e.map_url||"",onChange:e=>S(r,"map_url",e.target.value),placeholder:"https://www.google.com/maps/place/..."}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Paste the Google Maps link here. Coordinates will be extracted automatically."})]}):(0,a.jsx)("div",{className:"flex items-center space-x-2",children:e.map_url?(0,a.jsx)("a",{href:e.map_url,target:"_blank",rel:"noopener noreferrer",className:"text-cyan-600 hover:text-cyan-700 underline",children:"View on Google Maps"}):(0,a.jsx)("p",{className:"text-gray-500",children:"No map link provided"})})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(o._,{children:"Coordinates (for map display)"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(o._,{className:"text-xs text-muted-foreground",children:"Latitude"}),_?(0,a.jsx)(c.I,{type:"number",step:"any",value:e.coordinates.lat,onChange:e=>S(r,"lat",e.target.value)}):(0,a.jsx)("p",{className:"mt-6 border-l-2 pl-6 italic",children:e.coordinates.lat})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(o._,{className:"text-xs text-muted-foreground",children:"Longitude"}),_?(0,a.jsx)(c.I,{type:"number",step:"any",value:e.coordinates.lng,onChange:e=>S(r,"lng",e.target.value)}):(0,a.jsx)("p",{className:"mt-6 border-l-2 pl-6 italic",children:e.coordinates.lng})]})]})]})]},r))})]})})]})]})}},92595:function(e,r,s){"use strict";s.d(r,{d:function(){return c},z:function(){return o}});var a=s(57437),t=s(2265),n=s(37053),l=s(90535),i=s(22835);let c=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=t.forwardRef((e,r)=>{let{className:s,variant:t,size:l,asChild:o=!1,...d}=e,u=o?n.g7:"button";return(0,a.jsx)(u,{className:(0,i.cn)(c({variant:t,size:l,className:s})),ref:r,...d})});o.displayName="Button"},15353:function(e,r,s){"use strict";s.d(r,{r:function(){return i}});var a=s(57437),t=s(2265),n=s(50721),l=s(94508);let i=t.forwardRef((e,r)=>{let{className:s,...t}=e;return(0,a.jsx)(n.fC,{className:(0,l.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",s),...t,ref:r,children:(0,a.jsx)(n.bU,{className:(0,l.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});i.displayName=n.fC.displayName}},function(e){e.O(0,[6580,1451,3145,9064,5569,3624,4501,9754,2971,2117,1744],function(){return e(e.s=46076)}),_N_E=e.O()}]);