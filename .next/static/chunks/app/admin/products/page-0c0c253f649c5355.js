(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4122],{65787:function(e,t,r){Promise.resolve().then(r.bind(r,45845))},45845:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var s=r(57437),a=r(2265),i=r(86151),n=r(22252),d=r(44794),c=r(99397),l=r(73247),o=r(15868),u=r(18930),m=r(27648),h=r(33145),f=r(69064),x=r(92595),p=r(81973),g=r(41875),j=r(34029),v=r(62060),b=r(53190),y=r(27360);let w=[{id:"1",name:"Professional Diving Mask",description:"High-quality diving mask with anti-fog technology and comfortable silicone skirt",short_description:"Crystal clear vision underwater",category_id:"1",image_url:"https://images.unsplash.com/photo-1559827260-dc66d52bef19?auto=format&fit=crop&w=800",features:["Anti-fog coating","Comfortable silicone skirt","Tempered glass lens"],is_active:!0,display_order:1,created_at:"2024-01-01T00:00:00Z",product_categories:{name:"Diving Equipment"}},{id:"2",name:"Diving Fins",description:"Lightweight and efficient diving fins for better propulsion",short_description:"Enhanced underwater mobility",category_id:"1",image_url:"https://images.unsplash.com/photo-1544551763-46a013bb70d5?auto=format&fit=crop&w=800",features:["Lightweight design","Efficient blade shape","Comfortable foot pocket"],is_active:!0,display_order:2,created_at:"2024-01-02T00:00:00Z",product_categories:{name:"Diving Equipment"}},{id:"3",name:"Underwater Safety Light",description:"Bright LED safety light for underwater visibility",short_description:"Stay visible and safe underwater",category_id:"2",image_url:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?auto=format&fit=crop&w=800",features:["Waterproof to 100m","Long battery life","Multiple flash modes"],is_active:!0,display_order:1,created_at:"2024-01-03T00:00:00Z",product_categories:{name:"Safety Gear"}},{id:"4",name:"Waterproof Action Camera",description:"4K underwater action camera with stabilization",short_description:"Capture stunning underwater footage",category_id:"3",image_url:"https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?auto=format&fit=crop&w=800",features:["4K video recording","Image stabilization","Waterproof to 30m"],is_active:!0,display_order:1,created_at:"2024-01-04T00:00:00Z",product_categories:{name:"Underwater Cameras"}}];function N(){let[e,t]=(0,a.useState)([]),[r,N]=(0,a.useState)(!0),[_,C]=(0,a.useState)(""),[k,Z]=(0,a.useState)(!1),[T,A]=(0,a.useState)("");(0,a.useEffect)(()=>{D()},[]);let D=async()=>{try{let{data:e,error:r}=await i.O.from("products").select("\n          *,\n          product_categories (\n            name\n          )\n        ").order("created_at",{ascending:!1});r?(console.error("Error fetching products:",r),A("Database error: ".concat(r.message)),t(w),Z(!0)):(t(e||[]),Z(!1))}catch(e){console.error("Error:",e),A("Connection error: ".concat(e.message)),t(w),Z(!0)}finally{N(!1)}},S=async r=>{if(!k&&confirm("Are you sure you want to delete this product?"))try{let{error:s}=await i.O.from("products").delete().eq("id",r);if(s)throw s;f.ZP.success("Product deleted successfully!"),t(e.filter(e=>e.id!==r))}catch(e){console.error("Error deleting product:",e),f.ZP.error("Error deleting product: ".concat(e.message))}},R=e.filter(e=>e.name.toLowerCase().includes(_.toLowerCase())||e.description.toLowerCase().includes(_.toLowerCase()));return r?(0,s.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary"})}):(0,s.jsxs)("div",{className:"space-y-6",children:[(k||T)&&(0,s.jsxs)(v.bZ,{variant:"destructive",children:[(0,s.jsx)(n.Z,{className:"h-4 w-4"}),(0,s.jsx)(v.Cd,{children:T?"Database Connection Issue":"Demo Mode Active"}),(0,s.jsxs)(v.X,{children:[T?(0,s.jsxs)(s.Fragment,{children:["Database error: ",T,". Showing sample products."]}):(0,s.jsx)(s.Fragment,{children:"Showing sample products. Database not configured."}),(0,s.jsx)(m.default,{href:"/check-products-database",className:"underline ml-2",children:"Set up database â†’"})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Product Management"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:k?"Managing sample products (Demo Mode)":"Managing all company products"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)(g.C,{variant:k?"destructive":"secondary",children:[(0,s.jsx)(d.Z,{className:"h-3 w-3 mr-1"}),k?"Demo Mode":"Live"]}),(0,s.jsx)(x.z,{asChild:!0,disabled:k,children:(0,s.jsxs)(m.default,{href:"/admin/products/new",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Add New Product"]})})]})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(l.Z,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(p.I,{placeholder:"Search products...",className:"pl-10",value:_,onChange:e=>C(e.target.value)})]}),(0,s.jsxs)(j.Zb,{children:[(0,s.jsxs)(j.Ol,{children:[(0,s.jsx)(j.ll,{children:"Products"}),(0,s.jsxs)(j.SZ,{children:[R.length," product",1!==R.length?"s":""," found"]})]}),(0,s.jsxs)(j.aY,{children:[(0,s.jsxs)(b.iA,{children:[(0,s.jsx)(b.xD,{children:(0,s.jsxs)(b.SC,{children:[(0,s.jsx)(b.ss,{children:"Product"}),(0,s.jsx)(b.ss,{children:"Category"}),(0,s.jsx)(b.ss,{children:"Status"}),(0,s.jsx)(b.ss,{children:"Features"}),(0,s.jsx)(b.ss,{className:"text-right",children:"Actions"})]})}),(0,s.jsx)(b.RM,{children:R.map(e=>{var t;return(0,s.jsxs)(b.SC,{children:[(0,s.jsx)(b.pj,{children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[e.image_url&&(0,s.jsx)(h.default,{src:e.image_url,alt:e.name,width:48,height:48,className:"h-12 w-12 object-cover rounded-md"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.name}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground max-w-md truncate",children:e.description}),k&&(0,s.jsx)(g.C,{variant:"outline",className:"mt-1",children:"Demo Product"})]})]})}),(0,s.jsx)(b.pj,{children:(0,s.jsx)(g.C,{variant:"secondary",children:(null===(t=e.product_categories)||void 0===t?void 0:t.name)||"No Category"})}),(0,s.jsx)(b.pj,{children:(0,s.jsx)(g.C,{variant:e.is_active?"default":"destructive",children:e.is_active?"Active":"Inactive"})}),(0,s.jsx)(b.pj,{children:e.features&&e.features.length>0?(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:[e.features.length," feature",1!==e.features.length?"s":""]}):(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"No features"})}),(0,s.jsx)(b.pj,{className:"text-right",children:(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,s.jsx)(x.z,{variant:"ghost",size:"sm",asChild:!0,disabled:k,children:(0,s.jsx)(m.default,{href:"/admin/products/".concat(e.id,"/edit"),children:(0,s.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,s.jsxs)(y.aR,{children:[(0,s.jsx)(y.vW,{asChild:!0,children:(0,s.jsx)(x.z,{variant:"ghost",size:"sm",disabled:k,children:(0,s.jsx)(u.Z,{className:"h-4 w-4"})})}),(0,s.jsxs)(y._T,{children:[(0,s.jsxs)(y.fY,{children:[(0,s.jsx)(y.f$,{children:"Are you sure?"}),(0,s.jsxs)(y.yT,{children:['This action cannot be undone. This will permanently delete the product "',e.name,'".']})]}),(0,s.jsxs)(y.xo,{children:[(0,s.jsx)(y.le,{children:"Cancel"}),(0,s.jsx)(y.OL,{onClick:()=>S(e.id),children:"Delete"})]})]})]})]})})]},e.id)})})]}),0===R.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(d.Z,{className:"mx-auto h-12 w-12 text-muted-foreground"}),(0,s.jsx)("h3",{className:"mt-2 text-sm font-semibold",children:"No products found"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-muted-foreground",children:_?"Try adjusting your search terms.":"Get started by creating a new product."}),!k&&!_&&(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(x.z,{asChild:!0,children:(0,s.jsxs)(m.default,{href:"/admin/products/new",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Add Your First Product"]})})})]})]})]})]})}},62060:function(e,t,r){"use strict";r.d(t,{Cd:function(){return l},X:function(){return o},bZ:function(){return c}});var s=r(57437),a=r(2265),i=r(90535),n=r(22835);let d=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,...i}=e;return(0,s.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(d({variant:a}),r),...i})});c.displayName="Alert";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",r),...a})});l.displayName="AlertTitle";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",r),...a})});o.displayName="AlertDescription"},53190:function(e,t,r){"use strict";r.d(t,{RM:function(){return c},SC:function(){return l},iA:function(){return n},pj:function(){return u},ss:function(){return o},xD:function(){return d}});var s=r(57437),a=r(2265),i=r(94508);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,i.cn)("w-full caption-bottom text-sm",r),...a})})});n.displayName="Table";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("thead",{ref:t,className:(0,i.cn)("[&_tr]:border-b",r),...a})});d.displayName="TableHeader";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,i.cn)("[&_tr:last-child]:border-0",r),...a})});c.displayName="TableBody",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...a})}).displayName="TableFooter";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tr",{ref:t,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...a})});l.displayName="TableRow";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("th",{ref:t,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...a})});o.displayName="TableHead";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("td",{ref:t,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...a})});u.displayName="TableCell",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("caption",{ref:t,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",r),...a})}).displayName="TableCaption"},22252:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(39763).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},44794:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(39763).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])}},function(e){e.O(0,[6580,1451,9064,3145,5569,7514,9027,7015,2971,2117,1744],function(){return e(e.s=65787)}),_N_E=e.O()}]);