(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9435],{63155:function(e,t,s){Promise.resolve().then(s.bind(s,63612))},63612:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return v}});var r=s(57437),a=s(2265),i=s(99376),n=s(86151),c=s(32660),d=s(22252),l=s(15868),o=s(27648),u=s(69064),f=s(71948),m=s(34029),h=s(92595),p=s(62060),x=s(41875),g=s(47778);let j={1:{id:"1",name:"Professional Diving Mask",description:"High-quality diving mask with anti-fog technology and comfortable silicone skirt",short_description:"Crystal clear vision underwater",category_id:"1",image_url:"https://images.unsplash.com/photo-1559827260-dc66d52bef19?auto=format&fit=crop&w=800",images:["https://images.unsplash.com/photo-1559827260-dc66d52bef19?auto=format&fit=crop&w=800"],features:["Anti-fog coating","Comfortable silicone skirt","Tempered glass lens"],is_active:!0,display_order:1},2:{id:"2",name:"Diving Fins",description:"Lightweight and efficient diving fins for better propulsion",short_description:"Enhanced underwater mobility",category_id:"1",image_url:"https://images.unsplash.com/photo-1544551763-46a013bb70d5?auto=format&fit=crop&w=800",images:["https://images.unsplash.com/photo-1544551763-46a013bb70d5?auto=format&fit=crop&w=800"],features:["Lightweight design","Efficient blade shape","Comfortable foot pocket"],is_active:!0,display_order:2}};function v(e){let{params:t}=e,s=(0,i.useRouter)(),[v,N]=(0,a.useState)(!1),[b,w]=(0,a.useState)(null),[y,k]=(0,a.useState)(!0),[C,Z]=(0,a.useState)(!1),[E,_]=(0,a.useState)("");(0,a.useEffect)(()=>{O()},[t.id]);let O=async()=>{try{let{data:e,error:s}=await n.O.from("products").select("*").eq("id",t.id).single();if(s){console.error("Error fetching product:",s),_("Database error: ".concat(s.message));let e=j[t.id];e&&(w(e),Z(!0))}else w(e),Z(!1)}catch(s){console.error("Error:",s),_("Connection error: ".concat(s.message));let e=j[t.id];e&&(w(e),Z(!0))}finally{k(!1)}},D=async e=>{if(!C){N(!0);try{let{error:r}=await n.O.from("products").update(e).eq("id",t.id);if(r){console.error("Error updating product:",r),u.ZP.error("Error updating product: ".concat(r.message));return}u.ZP.success("Product updated successfully!"),s.push("/admin/products")}catch(e){console.error("Error updating product:",e),u.ZP.error("Error updating product: ".concat(e.message))}finally{N(!1)}}};return y?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(g.O,{className:"h-8 w-48"}),(0,r.jsx)(g.O,{className:"h-4 w-96"})]}),(0,r.jsx)(g.O,{className:"h-6 w-20"})]}),(0,r.jsxs)(m.Zb,{children:[(0,r.jsxs)(m.Ol,{children:[(0,r.jsx)(g.O,{className:"h-6 w-40"}),(0,r.jsx)(g.O,{className:"h-4 w-64"})]}),(0,r.jsxs)(m.aY,{className:"space-y-4",children:[(0,r.jsx)(g.O,{className:"h-10 w-full"}),(0,r.jsx)(g.O,{className:"h-10 w-full"}),(0,r.jsx)(g.O,{className:"h-24 w-full"})]})]})]}):b?(0,r.jsxs)("div",{className:"space-y-6",children:[(C||E)&&(0,r.jsxs)(p.bZ,{variant:"destructive",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4"}),(0,r.jsx)(p.Cd,{children:E?"Database Connection Issue":"Demo Mode Active"}),(0,r.jsxs)(p.X,{children:[E?(0,r.jsxs)(r.Fragment,{children:["Database error: ",E,". Showing sample product data."]}):(0,r.jsx)(r.Fragment,{children:"Editing sample product. Database not configured."}),(0,r.jsx)(o.default,{href:"/check-products-database",className:"underline ml-2",children:"Set up database →"})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsx)("div",{className:"flex items-center space-x-2",children:(0,r.jsx)(h.z,{variant:"ghost",size:"sm",asChild:!0,children:(0,r.jsxs)(o.default,{href:"/admin/products",children:[(0,r.jsx)(c.Z,{className:"h-4 w-4 mr-1"}),"Back to Products"]})})}),(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Edit Product"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:C?"Editing sample product (Demo Mode)":"Edit product data"}),b&&(0,r.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Product ID: ",b.id," • ",b.name]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(x.C,{variant:C?"destructive":"secondary",children:C?"Demo Mode":"Live"}),(0,r.jsxs)(x.C,{variant:"outline",children:[(0,r.jsx)(l.Z,{className:"h-3 w-3 mr-1"}),"Editing"]})]})]}),(0,r.jsx)(f.Z,{initialData:b,onSubmit:D,loading:v})]}):(0,r.jsx)("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:(0,r.jsxs)(m.Zb,{className:"w-full max-w-md",children:[(0,r.jsxs)(m.Ol,{className:"text-center",children:[(0,r.jsx)(m.ll,{children:"Product Not Found"}),(0,r.jsx)(m.SZ,{children:"The requested product could not be found."})]}),(0,r.jsxs)(m.aY,{className:"flex flex-col space-y-2",children:[(0,r.jsx)(h.z,{asChild:!0,children:(0,r.jsxs)(o.default,{href:"/admin/products",children:[(0,r.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Back to Products"]})}),(0,r.jsx)(h.z,{variant:"outline",asChild:!0,children:(0,r.jsxs)(o.default,{href:"/check-products-database",children:[(0,r.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Check Database"]})})]})]})})}},62060:function(e,t,s){"use strict";s.d(t,{Cd:function(){return l},X:function(){return o},bZ:function(){return d}});var r=s(57437),a=s(2265),i=s(90535),n=s(22835);let c=(0,i.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,...i}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:(0,n.cn)(c({variant:a}),s),...i})});d.displayName="Alert";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",s),...a})});l.displayName="AlertTitle";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",s),...a})});o.displayName="AlertDescription"},34029:function(e,t,s){"use strict";s.d(t,{Ol:function(){return c},SZ:function(){return l},Zb:function(){return n},aY:function(){return o},ll:function(){return d}});var r=s(57437),a=s(2265),i=s(22835);let n=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...a})});n.displayName="Card";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...a})});c.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",s),...a})});d.displayName="CardTitle";let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",s),...a})});l.displayName="CardDescription";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",s),...a})});o.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},47778:function(e,t,s){"use strict";s.d(t,{O:function(){return i}});var r=s(57437),a=s(22835);function i(e){let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,a.cn)("animate-pulse rounded-md bg-muted",t),...s})}},15868:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(39763).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])}},function(e){e.O(0,[6580,1451,9064,3145,5569,8253,5003,2971,2117,1744],function(){return e(e.s=63155)}),_N_E=e.O()}]);