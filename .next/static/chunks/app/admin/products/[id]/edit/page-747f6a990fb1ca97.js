(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[435],{8737:function(e,t,r){Promise.resolve().then(r.bind(r,3612))},3612:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var n=r(7437),s=r(2265),a=r(9376),c=r(6151),i=r(1948);function l(e){let{params:t}=e,r=(0,a.useRouter)(),[l,o]=(0,s.useState)(!1),[d,u]=(0,s.useState)(null),[f,h]=(0,s.useState)(!0);(0,s.useEffect)(()=>{p()},[t.id]);let p=async()=>{try{let{data:e,error:r}=await c.O.from("products").select("*").eq("id",t.id).single();if(r){console.error("Error fetching product:",r),alert("حدث خطأ أثناء جلب بيانات المنتج");return}u(e)}catch(e){console.error("Error fetching product:",e),alert("حدث خطأ أثناء جلب بيانات المنتج")}finally{h(!1)}},m=async e=>{o(!0);try{let{error:n}=await c.O.from("products").update(e).eq("id",t.id);if(n){console.error("Error updating product:",n),alert("حدث خطأ أثناء تحديث المنتج");return}alert("تم تحديث المنتج بنجاح!"),r.push("/admin/products")}catch(e){console.error("Error updating product:",e),alert("حدث خطأ أثناء تحديث المنتج")}finally{o(!1)}};return f?(0,n.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-cyan-600"})}):d?(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"تعديل المنتج"}),(0,n.jsx)("p",{className:"mt-2 text-gray-600",children:"تعديل بيانات المنتج"})]}),(0,n.jsx)(i.Z,{initialData:d,onSubmit:m,loading:l})]}):(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("p",{className:"text-gray-500",children:"المنتج غير موجود"}),(0,n.jsx)("button",{onClick:()=>r.push("/admin/products"),className:"mt-4 px-4 py-2 bg-cyan-600 text-white rounded-md hover:bg-cyan-700",children:"العودة للمنتجات"})]})}}},function(e){e.O(0,[844,145,224,971,117,744],function(){return e(e.s=8737)}),_N_E=e.O()}]);