(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9435],{3155:function(e,s,t){Promise.resolve().then(t.bind(t,3612))},3612:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return N}});var a=t(7437),r=t(2265),i=t(9376),c=t(6151),n=t(2660),d=t(2252),l=t(5868),o=t(7648),u=t(9064),h=t(1840),m=t(4029),f=t(2595),p=t(2060),x=t(1875),j=t(7778);let g={1:{id:"1",name:"Professional Diving Mask",description:"High-quality diving mask with anti-fog technology and comfortable silicone skirt",short_description:"Crystal clear vision underwater",category_id:"1",image_url:"https://images.unsplash.com/photo-1559827260-dc66d52bef19?auto=format&fit=crop&w=800",images:["https://images.unsplash.com/photo-1559827260-dc66d52bef19?auto=format&fit=crop&w=800"],features:["Anti-fog coating","Comfortable silicone skirt","Tempered glass lens"],is_active:!0,display_order:1},2:{id:"2",name:"Diving Fins",description:"Lightweight and efficient diving fins for better propulsion",short_description:"Enhanced underwater mobility",category_id:"1",image_url:"https://images.unsplash.com/photo-1544551763-46a013bb70d5?auto=format&fit=crop&w=800",images:["https://images.unsplash.com/photo-1544551763-46a013bb70d5?auto=format&fit=crop&w=800"],features:["Lightweight design","Efficient blade shape","Comfortable foot pocket"],is_active:!0,display_order:2}};function N(e){let{params:s}=e,t=(0,i.useRouter)(),[N,v]=(0,r.useState)(!1),[b,w]=(0,r.useState)(null),[y,k]=(0,r.useState)(!0),[E,Z]=(0,r.useState)(!1),[_,O]=(0,r.useState)("");(0,r.useEffect)(()=>{C()},[s.id]);let C=async()=>{try{let{data:e,error:t}=await c.O.from("products").select("*").eq("id",s.id).single();if(t){console.error("Error fetching product:",t),O("Database error: ".concat(t.message));let e=g[s.id];e&&(w(e),Z(!0))}else w(e),Z(!1)}catch(t){console.error("Error:",t),O("Connection error: ".concat(t.message));let e=g[s.id];e&&(w(e),Z(!0))}finally{k(!1)}},D=async e=>{if(!E){v(!0);try{let{error:a}=await c.O.from("products").update(e).eq("id",s.id);if(a){console.error("Error updating product:",a),u.ZP.error("Error updating product: ".concat(a.message));return}u.ZP.success("Product updated successfully!"),t.push("/admin/products")}catch(e){console.error("Error updating product:",e),u.ZP.error("Error updating product: ".concat(e.message))}finally{v(!1)}}};return y?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(j.O,{className:"h-8 w-48"}),(0,a.jsx)(j.O,{className:"h-4 w-96"})]}),(0,a.jsx)(j.O,{className:"h-6 w-20"})]}),(0,a.jsxs)(m.Zb,{children:[(0,a.jsxs)(m.Ol,{children:[(0,a.jsx)(j.O,{className:"h-6 w-40"}),(0,a.jsx)(j.O,{className:"h-4 w-64"})]}),(0,a.jsxs)(m.aY,{className:"space-y-4",children:[(0,a.jsx)(j.O,{className:"h-10 w-full"}),(0,a.jsx)(j.O,{className:"h-10 w-full"}),(0,a.jsx)(j.O,{className:"h-24 w-full"})]})]})]}):b?(0,a.jsxs)("div",{className:"space-y-6",children:[(E||_)&&(0,a.jsxs)(p.bZ,{variant:"destructive",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4"}),(0,a.jsx)(p.Cd,{children:_?"Database Connection Issue":"Demo Mode Active"}),(0,a.jsxs)(p.X,{children:[_?(0,a.jsxs)(a.Fragment,{children:["Database error: ",_,". Showing sample product data."]}):(0,a.jsx)(a.Fragment,{children:"Editing sample product. Database not configured."}),(0,a.jsx)(o.default,{href:"/check-products-database",className:"underline ml-2",children:"Set up database →"})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)(f.z,{variant:"ghost",size:"sm",asChild:!0,children:(0,a.jsxs)(o.default,{href:"/admin/products",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4 mr-1"}),"Back to Products"]})})}),(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Edit Product"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:E?"Editing sample product (Demo Mode)":"Edit product data"}),b&&(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Product ID: ",b.id," • ",b.name]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x.C,{variant:E?"destructive":"secondary",children:E?"Demo Mode":"Live"}),(0,a.jsxs)(x.C,{variant:"outline",children:[(0,a.jsx)(l.Z,{className:"h-3 w-3 mr-1"}),"Editing"]})]})]}),(0,a.jsx)(h.Z,{initialData:b,onSubmit:D,loading:N})]}):(0,a.jsx)("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:(0,a.jsxs)(m.Zb,{className:"w-full max-w-md",children:[(0,a.jsxs)(m.Ol,{className:"text-center",children:[(0,a.jsx)(m.ll,{children:"Product Not Found"}),(0,a.jsx)(m.SZ,{children:"The requested product could not be found."})]}),(0,a.jsxs)(m.aY,{className:"flex flex-col space-y-2",children:[(0,a.jsx)(f.z,{asChild:!0,children:(0,a.jsxs)(o.default,{href:"/admin/products",children:[(0,a.jsx)(n.Z,{className:"h-4 w-4 mr-2"}),"Back to Products"]})}),(0,a.jsx)(f.z,{variant:"outline",asChild:!0,children:(0,a.jsxs)(o.default,{href:"/check-products-database",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Check Database"]})})]})]})})}},7778:function(e,s,t){"use strict";t.d(s,{O:function(){return i}});var a=t(7437),r=t(2835);function i(e){let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-muted",s),...t})}},5868:function(e,s,t){"use strict";t.d(s,{Z:function(){return a}});let a=(0,t(9763).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]])}},function(e){e.O(0,[6844,7648,5569,3145,9064,7514,3909,3988,1390,8338,2971,2117,1744],function(){return e(e.s=3155)}),_N_E=e.O()}]);