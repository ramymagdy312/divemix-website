(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4834],{8144:function(e,a,i){Promise.resolve().then(i.bind(i,5741))},6151:function(e,a,i){"use strict";i.d(a,{O:function(){return l}});var n=i(6580);let s="https://ilxfqrxybtcftioizoan.supabase.co",t="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlseGZxcnh5YnRjZnRpb2l6b2FuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM4NTg5MjMsImV4cCI6MjA2OTQzNDkyM30.Jhjy7136xlqHcVjeCGPDvh4Ofpio3a09Y2fFu2Sqqh0";s||console.warn("Supabase URL not configured properly. Using fallback configuration."),t||console.warn("Supabase Anon Key not configured properly. Using fallback configuration.");let l=(0,n.eI)(s||"https://placeholder.supabase.co",t||"placeholder-key")},5741:function(e,a,i){"use strict";i.r(a),i.d(a,{default:function(){return l}});var n=i(7437),s=i(2265),t=i(6151);function l(){let[e,a]=(0,s.useState)(""),[i,l]=(0,s.useState)(!1),r=async()=>{l(!0),a("\uD83D\uDD04 Updating Applications schema to support multiple images...\n\n");try{a(e=>e+"1. Checking current schema...\n");let{data:e,error:i}=await t.O.from("applications").select("*").limit(1);if(i){a(e=>e+"   ❌ Error checking schema: ".concat(i.message,"\n"));return}let n=null==e?void 0:e[0];if(n){let e=Object.keys(n);a(a=>a+"   ✅ Current fields: ".concat(e.join(", "),"\n")),e.includes("images")?a(e=>e+"   ✅ Schema already supports multiple images\n"):e.includes("image_url")&&a(e=>e+"   ⚠️  Schema uses single image_url, needs update\n")}else a(e=>e+"   ℹ️  Table is empty, cannot check current schema\n");a(e=>e+"\n2. Schema update options:\n"),a(e=>e+"   Option A: Add images[] column alongside image_url\n"),a(e=>e+"   Option B: Rename image_url to images and change type\n"),a(e=>e+"   Option C: Migrate existing image_url data to images[]\n\n"),a(e=>e+"3. Required SQL commands (run in Supabase SQL Editor):\n\n"),a(e=>e+"-- Option A: Add images column (recommended)\nALTER TABLE applications ADD COLUMN IF NOT EXISTS images TEXT[];\n\n-- Option B: If you want to replace image_url completely\n-- ALTER TABLE applications DROP COLUMN IF EXISTS image_url;\n-- ALTER TABLE applications ADD COLUMN images TEXT[];\n\n-- Option C: Migrate existing data (if you have data in image_url)\n-- UPDATE applications \n-- SET images = ARRAY[image_url] \n-- WHERE image_url IS NOT NULL AND image_url != '';\n\n-- Check the updated schema\nSELECT column_name, data_type, is_nullable \nFROM information_schema.columns \nWHERE table_name = 'applications' \nORDER BY ordinal_position;\n\n"),a(e=>e+"4. Testing schema update...\n");try{let{data:e,error:i}=await t.O.from("applications").insert([{name:"Schema Test Application",description:"Testing images array support",images:["https://example.com/test1.jpg","https://example.com/test2.jpg"],use_cases:["Test use case"],benefits:["Test benefit"],is_active:!0,display_order:999}]).select().single();i?i.message.includes('column "images" does not exist')?(a(e=>e+"   ⚠️  images column does not exist - needs to be added\n"),a(e=>e+"   \uD83D\uDCA1 Run the SQL commands above to add the column\n")):a(e=>e+"   ❌ Insert test failed: ".concat(i.message,"\n")):(a(e=>e+"   ✅ images array support is working!\n"),await t.O.from("applications").delete().eq("id",e.id),a(e=>e+"   \uD83E\uDDF9 Test data cleaned up\n"))}catch(e){a(a=>a+"   ❌ Schema test failed: ".concat(e.message,"\n"))}a(e=>e+"\n5. Next steps:\n"),a(e=>e+"   • Run the SQL commands in Supabase SQL Editor\n"),a(e=>e+"   • Update the application forms to use ImageUploader\n"),a(e=>e+"   • Test the updated forms\n"),a(e=>e+"   • Migrate existing image_url data if needed\n\n"),a(e=>e+"\uD83C\uDF89 Schema analysis complete!\n")}catch(e){a(a=>a+"\n❌ Schema update failed: ".concat(e.message,"\n"))}finally{l(!1)}};return(0,n.jsxs)("div",{className:"p-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"\uD83D\uDD04 Update Applications Schema for Multiple Images"}),(0,n.jsxs)("div",{className:"mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-blue-800 mb-2",children:"\uD83D\uDCF8 Multiple Images Support"}),(0,n.jsx)("p",{className:"text-blue-700 mb-2",children:"Updating the applications table to support multiple images instead of a single image_url."}),(0,n.jsxs)("div",{className:"text-sm text-blue-600",children:[(0,n.jsx)("strong",{children:"Changes needed:"}),(0,n.jsxs)("ul",{className:"mt-1 space-y-1",children:[(0,n.jsx)("li",{children:"• Add images[] column to store multiple image URLs"}),(0,n.jsx)("li",{children:"• Update forms to use ImageUploader component"}),(0,n.jsx)("li",{children:"• Migrate existing image_url data (if any)"}),(0,n.jsx)("li",{children:"• Test the updated functionality"})]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,n.jsxs)("button",{onClick:r,disabled:i,className:"bg-blue-600 text-white px-6 py-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 text-left",children:[(0,n.jsx)("div",{className:"font-semibold mb-1",children:"\uD83D\uDD0D Analyze Current Schema"}),(0,n.jsx)("div",{className:"text-sm opacity-90",children:"Check current structure and plan updates"})]}),(0,n.jsxs)("button",{onClick:()=>{a("\n-- \uD83D\uDD04 Complete Applications Schema Migration Script\n-- Run these commands in your Supabase SQL Editor\n\n-- Step 1: Add images column if it doesn't exist\nALTER TABLE applications ADD COLUMN IF NOT EXISTS images TEXT[];\n\n-- Step 2: Migrate existing image_url data to images array (optional)\nUPDATE applications \nSET images = CASE \n  WHEN image_url IS NOT NULL AND image_url != '' THEN ARRAY[image_url]\n  ELSE ARRAY[]::TEXT[]\nEND\nWHERE images IS NULL;\n\n-- Step 3: Check the migration results\nSELECT \n  id, \n  name, \n  image_url, \n  images,\n  CASE \n    WHEN images IS NOT NULL AND array_length(images, 1) > 0 THEN 'Has images'\n    WHEN image_url IS NOT NULL AND image_url != '' THEN 'Has image_url only'\n    ELSE 'No images'\n  END as image_status\nFROM applications\nORDER BY id;\n\n-- Step 4: (Optional) Remove image_url column after migration\n-- Only run this after confirming the migration worked correctly\n-- ALTER TABLE applications DROP COLUMN image_url;\n\n-- Step 5: Verify final schema\nSELECT column_name, data_type, is_nullable \nFROM information_schema.columns \nWHERE table_name = 'applications' \nORDER BY ordinal_position;\n")},className:"bg-green-600 text-white px-6 py-4 rounded-lg hover:bg-green-700 text-left",children:[(0,n.jsx)("div",{className:"font-semibold mb-1",children:"\uD83D\uDCDD Show Migration Script"}),(0,n.jsx)("div",{className:"text-sm opacity-90",children:"Get complete SQL migration commands"})]})]}),e&&(0,n.jsxs)("div",{className:"bg-gray-900 text-green-400 p-6 rounded-lg font-mono text-sm",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h2",{className:"text-lg text-white",children:"\uD83D\uDCCB Schema Analysis Results:"}),(0,n.jsx)("button",{onClick:()=>navigator.clipboard.writeText(e),className:"bg-gray-700 text-white px-3 py-1 rounded text-xs hover:bg-gray-600",children:"\uD83D\uDCCB Copy"})]}),(0,n.jsx)("pre",{className:"whitespace-pre-wrap max-h-96 overflow-y-auto",children:e})]}),(0,n.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,n.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,n.jsx)("h3",{className:"font-semibold text-yellow-800 mb-2",children:"⚠️ Before Migration"}),(0,n.jsxs)("div",{className:"text-sm text-yellow-700 space-y-2",children:[(0,n.jsx)("p",{children:(0,n.jsx)("strong",{children:"Backup your data:"})}),(0,n.jsxs)("ul",{className:"space-y-1",children:[(0,n.jsx)("li",{children:"• Export applications table"}),(0,n.jsx)("li",{children:"• Test on development first"}),(0,n.jsx)("li",{children:"• Verify existing image URLs"}),(0,n.jsx)("li",{children:"• Plan rollback strategy"})]})]})]}),(0,n.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,n.jsx)("h3",{className:"font-semibold text-blue-800 mb-2",children:"\uD83D\uDD04 Migration Steps"}),(0,n.jsx)("div",{className:"text-sm text-blue-700 space-y-2",children:(0,n.jsxs)("ol",{className:"space-y-1",children:[(0,n.jsx)("li",{children:"1. Run schema analysis"}),(0,n.jsx)("li",{children:"2. Execute SQL commands"}),(0,n.jsx)("li",{children:"3. Update form components"}),(0,n.jsx)("li",{children:"4. Test image upload"}),(0,n.jsx)("li",{children:"5. Migrate existing data"})]})})]}),(0,n.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[(0,n.jsx)("h3",{className:"font-semibold text-green-800 mb-2",children:"✅ After Migration"}),(0,n.jsxs)("div",{className:"text-sm text-green-700 space-y-2",children:[(0,n.jsx)("p",{children:(0,n.jsx)("strong",{children:"You'll have:"})}),(0,n.jsxs)("ul",{className:"space-y-1",children:[(0,n.jsx)("li",{children:"• Multiple image upload"}),(0,n.jsx)("li",{children:"• Drag & drop interface"}),(0,n.jsx)("li",{children:"• Image preview grid"}),(0,n.jsx)("li",{children:"• Automatic file management"})]})]})]})]})]})}}},function(e){e.O(0,[6580,2971,2117,1744],function(){return e(e.s=8144)}),_N_E=e.O()}]);