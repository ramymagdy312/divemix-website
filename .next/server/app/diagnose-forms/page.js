(()=>{var e={};e.id=1924,e.ids=[1924],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},58359:()=>{},93739:()=>{},84570:(e,s,i)=>{"use strict";i.r(s),i.d(s,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>c}),i(75072),i(11506),i(35866);var t=i(23191),r=i(88716),a=i(37922),n=i.n(a),o=i(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);i.d(s,l);let c=["",{children:["diagnose-forms",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,75072)),"D:\\Ramy\\RTS\\ReactJS\\divemix-website\\app\\diagnose-forms\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(i.bind(i,11506)),"D:\\Ramy\\RTS\\ReactJS\\divemix-website\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,35866,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\Ramy\\RTS\\ReactJS\\divemix-website\\app\\diagnose-forms\\page.tsx"],u="/diagnose-forms/page",p={require:i,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/diagnose-forms/page",pathname:"/diagnose-forms",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},11427:(e,s,i)=>{Promise.resolve().then(i.bind(i,96425))},48819:(e,s,i)=>{Promise.resolve().then(i.bind(i,40381))},29823:(e,s,i)=>{Promise.resolve().then(i.t.bind(i,12994,23)),Promise.resolve().then(i.t.bind(i,96114,23)),Promise.resolve().then(i.t.bind(i,9727,23)),Promise.resolve().then(i.t.bind(i,79671,23)),Promise.resolve().then(i.t.bind(i,41868,23)),Promise.resolve().then(i.t.bind(i,84759,23))},96425:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>n});var t=i(10326),r=i(17577),a=i(99060);function n(){let[e,s]=(0,r.useState)(""),[i,n]=(0,r.useState)(!1),o=async()=>{n(!0),s("\uD83D\uDD0D Starting Forms Diagnosis...\n\n");try{s(e=>e+"1. Checking table structures...\n");try{let{data:e,error:i}=await a.O.from("applications").select("*").limit(1);if(i)s(e=>e+`   âŒ Applications table error: ${i.message}
`);else{let i=e?.[0];if(i){let e=Object.keys(i);s(s=>s+`   âœ… Applications table fields: ${e.join(", ")}
`);let t=["name","description","image_url","use_cases","benefits","is_active","display_order"].filter(s=>!e.includes(s));t.length>0&&s(e=>e+`   âš ï¸  Missing fields: ${t.join(", ")}
`)}else s(e=>e+"   â„¹ï¸  Applications table is empty\n")}}catch(e){s(s=>s+`   âŒ Applications table check failed: ${e.message}
`)}try{let{data:e,error:i}=await a.O.from("services").select("*").limit(1);if(i)s(e=>e+`   âŒ Services table error: ${i.message}
`);else{let i=e?.[0];if(i){let e=Object.keys(i);s(s=>s+`   âœ… Services table fields: ${e.join(", ")}
`);let t=["name","description","icon","features","is_active","display_order"].filter(s=>!e.includes(s));t.length>0&&s(e=>e+`   âš ï¸  Missing fields: ${t.join(", ")}
`)}else s(e=>e+"   â„¹ï¸  Services table is empty\n")}}catch(e){s(s=>s+`   âŒ Services table check failed: ${e.message}
`)}s(e=>e+"\n"),s(e=>e+"2. Testing data insertion...\n");try{let{data:e,error:i}=await a.O.from("applications").insert([{name:"Test Application",description:"Test description",image_url:"https://example.com/test.jpg",use_cases:["Test use case"],benefits:["Test benefit"],is_active:!0,display_order:999}]).select().single();i?(s(e=>e+`   âŒ Application insert failed: ${i.message}
`),s(e=>e+`   ðŸ’¡ Error details: ${JSON.stringify(i,null,2)}
`)):(s(e=>e+"   âœ… Application insert successful\n"),await a.O.from("applications").delete().eq("id",e.id),s(e=>e+"   \uD83E\uDDF9 Test data cleaned up\n"))}catch(e){s(s=>s+`   âŒ Application insert test failed: ${e.message}
`)}try{let{data:e,error:i}=await a.O.from("services").insert([{name:"Test Service",description:"Test description",icon:"\uD83D\uDD27",features:["Test feature"],is_active:!0,display_order:999}]).select().single();i?(s(e=>e+`   âŒ Service insert failed: ${i.message}
`),s(e=>e+`   ðŸ’¡ Error details: ${JSON.stringify(i,null,2)}
`)):(s(e=>e+"   âœ… Service insert successful\n"),await a.O.from("services").delete().eq("id",e.id),s(e=>e+"   \uD83E\uDDF9 Test data cleaned up\n"))}catch(e){s(s=>s+`   âŒ Service insert test failed: ${e.message}
`)}s(e=>e+"\n"),s(e=>e+"3. Checking Row Level Security (RLS) policies...\n");try{let{data:e,error:i}=await a.O.from("applications").select("id").limit(1);i?(s(e=>e+`   âš ï¸  RLS might be blocking access: ${i.message}
`),s(e=>e+"   \uD83D\uDCA1 Solution: Disable RLS or add proper policies\n")):s(e=>e+"   âœ… Public read access working\n")}catch(e){s(s=>s+`   âŒ RLS check failed: ${e.message}
`)}s(e=>e+"\n"),s(e=>e+"4. Checking for common form issues...\n");try{s(e=>e+"   â„¹ï¸  Note: Forms now use image_url instead of ImageUploader\n"),s(e=>e+"   â„¹ï¸  Note: Applications use use_cases and benefits arrays\n"),s(e=>e+"   â„¹ï¸  Note: Services use name instead of title\n")}catch(e){s(s=>s+`   âŒ Component check failed: ${e.message}
`)}s(e=>e+"\n\uD83C\uDF89 Diagnosis Complete!\n\n"),s(e=>e+"\uD83D\uDCCB Summary & Recommendations:\n"),s(e=>e+"â€¢ If insert tests failed, check database schema\n"),s(e=>e+"â€¢ If RLS errors occur, check Supabase policies\n"),s(e=>e+"â€¢ Make sure all required fields are present\n"),s(e=>e+"â€¢ Test forms manually after running this diagnosis\n\n"),s(e=>e+"\uD83D\uDE80 Next Steps:\n"),s(e=>e+"1. Visit /admin/applications/new to test application form\n"),s(e=>e+"2. Visit /admin/services/new to test service form\n"),s(e=>e+"3. Check browser console for any JavaScript errors\n"),s(e=>e+"4. If issues persist, check Supabase dashboard\n")}catch(e){s(s=>s+`
âŒ Diagnosis failed: ${e.message}
`)}finally{n(!1)}};return(0,t.jsxs)("div",{className:"p-8",children:[t.jsx("h1",{className:"text-3xl font-bold mb-6",children:"\uD83D\uDD0D Forms Error Diagnosis"}),(0,t.jsxs)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-red-800 mb-2",children:"\uD83D\uDEA8 Form Errors Detected"}),t.jsx("p",{className:"text-red-700 mb-2",children:"Running comprehensive diagnosis to identify the root cause of form submission errors."}),(0,t.jsxs)("div",{className:"text-sm text-red-600",children:[t.jsx("strong",{children:"This tool will check:"}),(0,t.jsxs)("ul",{className:"mt-1 space-y-1",children:[t.jsx("li",{children:"â€¢ Database table structures and field names"}),t.jsx("li",{children:"â€¢ Data insertion capabilities"}),t.jsx("li",{children:"â€¢ Row Level Security (RLS) policies"}),t.jsx("li",{children:"â€¢ Common form configuration issues"})]})]})]}),t.jsx("div",{className:"mb-6",children:t.jsx("button",{onClick:o,disabled:i,className:"bg-red-600 text-white px-8 py-3 rounded-lg hover:bg-red-700 disabled:opacity-50 text-lg font-semibold",children:i?"\uD83D\uDD0D Running Diagnosis...":"\uD83D\uDE80 Start Diagnosis"})}),e&&(0,t.jsxs)("div",{className:"bg-gray-900 text-green-400 p-6 rounded-lg font-mono text-sm",children:[t.jsx("h2",{className:"text-lg mb-4 text-white",children:"\uD83D\uDD0D Diagnosis Results:"}),t.jsx("pre",{className:"whitespace-pre-wrap max-h-96 overflow-y-auto",children:e})]}),(0,t.jsxs)("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"\uD83D\uDD27 Common Issues & Solutions:"}),(0,t.jsxs)("ul",{className:"text-sm text-blue-700 space-y-2",children:[(0,t.jsxs)("li",{children:[t.jsx("strong",{children:"Field name mismatch:"})," Check if database fields match form fields"]}),(0,t.jsxs)("li",{children:[t.jsx("strong",{children:"Missing required fields:"})," Ensure all required columns exist"]}),(0,t.jsxs)("li",{children:[t.jsx("strong",{children:"RLS policies:"})," Check if Row Level Security is blocking inserts"]}),(0,t.jsxs)("li",{children:[t.jsx("strong",{children:"Data type errors:"})," Verify array fields are properly formatted"]}),(0,t.jsxs)("li",{children:[t.jsx("strong",{children:"Validation errors:"})," Check for missing or invalid data"]})]})]}),(0,t.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[t.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"âœ… Expected Results:"}),(0,t.jsxs)("ul",{className:"text-sm text-green-700 space-y-2",children:[(0,t.jsxs)("li",{children:[t.jsx("strong",{children:"Table structures:"})," All required fields present"]}),(0,t.jsxs)("li",{children:[t.jsx("strong",{children:"Data insertion:"})," Test records insert successfully"]}),(0,t.jsxs)("li",{children:[t.jsx("strong",{children:"RLS policies:"})," No blocking policies for inserts"]}),(0,t.jsxs)("li",{children:[t.jsx("strong",{children:"Form compatibility:"})," All fields match database schema"]}),(0,t.jsxs)("li",{children:[t.jsx("strong",{children:"Clean operation:"})," Test data cleaned up automatically"]})]})]})]})]})}},99060:(e,s,i)=>{"use strict";i.d(s,{O:()=>n});var t=i(52997);let r="https://ilxfqrxybtcftioizoan.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlseGZxcnh5YnRjZnRpb2l6b2FuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM4NTg5MjMsImV4cCI6MjA2OTQzNDkyM30.Jhjy7136xlqHcVjeCGPDvh4Ofpio3a09Y2fFu2Sqqh0";r||console.warn("Supabase URL not configured properly. Using fallback configuration."),a||console.warn("Supabase Anon Key not configured properly. Using fallback configuration.");let n=(0,t.eI)(r||"https://placeholder.supabase.co",a||"placeholder-key")},75072:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>t});let t=(0,i(68570).createProxy)(String.raw`D:\Ramy\RTS\ReactJS\divemix-website\app\diagnose-forms\page.tsx#default`)},11506:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>n,metadata:()=>a});var t=i(19510),r=i(19125);i(67272);let a={title:"DiveMix - Gas & Compressor Technologies",description:"Leading the industry in compressed air and gas solutions since 1990",icons:{icon:"/img/faveicon.ico"}};function n({children:e}){return t.jsx("html",{lang:"en",children:(0,t.jsxs)("body",{children:[e,t.jsx(r.x7,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,style:{background:"#10b981"}},error:{duration:5e3,style:{background:"#ef4444"}}}})]})})}},67272:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var i=e=>s(s.s=e),t=s.X(0,[9276,4764,2997],()=>i(84570));module.exports=t})();