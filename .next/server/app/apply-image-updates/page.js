(()=>{var e={};e.id=4421,e.ids=[4421],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},58359:()=>{},93739:()=>{},93574:(e,s,i)=>{"use strict";i.r(s),i.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d}),i(93161),i(11506),i(35866);var a=i(23191),t=i(88716),r=i(37922),n=i.n(r),l=i(95231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);i.d(s,o);let d=["",{children:["apply-image-updates",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,93161)),"D:\\Ramy\\RTS\\ReactJS\\divemix-website\\app\\apply-image-updates\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(i.bind(i,11506)),"D:\\Ramy\\RTS\\ReactJS\\divemix-website\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,35866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\Ramy\\RTS\\ReactJS\\divemix-website\\app\\apply-image-updates\\page.tsx"],p="/apply-image-updates/page",m={require:i,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/apply-image-updates/page",pathname:"/apply-image-updates",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},33111:(e,s,i)=>{Promise.resolve().then(i.bind(i,23007))},48819:(e,s,i)=>{Promise.resolve().then(i.bind(i,40381))},29823:(e,s,i)=>{Promise.resolve().then(i.t.bind(i,12994,23)),Promise.resolve().then(i.t.bind(i,96114,23)),Promise.resolve().then(i.t.bind(i,9727,23)),Promise.resolve().then(i.t.bind(i,79671,23)),Promise.resolve().then(i.t.bind(i,41868,23)),Promise.resolve().then(i.t.bind(i,84759,23))},23007:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>n});var a=i(10326),t=i(17577),r=i(99060);function n(){let[e,s]=(0,t.useState)(""),[i,n]=(0,t.useState)(!1),l=async()=>{n(!0),s("\uD83D\uDD04 Applying image upload updates to Applications...\n\n");try{s(e=>e+"1. Checking current applications table schema...\n");let{data:e,error:i}=await r.O.from("applications").select("*").limit(1);if(i){s(e=>e+`   ‚ùå Error checking schema: ${i.message}
`);return}let a=e?.[0];if(a){let e=Object.keys(a);s(s=>s+`   ‚úÖ Current fields: ${e.join(", ")}
`),e.includes("images")?s(e=>e+"   ‚úÖ images[] column already exists\n"):s(e=>e+"   ‚ö†Ô∏è  images[] column missing - needs to be added\n")}else s(e=>e+"   ‚ÑπÔ∏è  Table is empty\n");s(e=>e+"\n2. Testing images column support...\n");try{let{data:e,error:i}=await r.O.from("applications").insert([{name:"Image Test Application",description:"Testing multiple images support",images:["https://example.com/test1.jpg","https://example.com/test2.jpg"],use_cases:["Test use case"],benefits:["Test benefit"],is_active:!0,display_order:999}]).select().single();i?i.message.includes('column "images" does not exist')?(s(e=>e+"   ‚ùå images column does not exist\n"),s(e=>e+"   \uD83D\uDCA1 You need to run this SQL command in Supabase:\n"),s(e=>e+"   ALTER TABLE applications ADD COLUMN images TEXT[];\n")):s(e=>e+`   ‚ùå Insert test failed: ${i.message}
`):(s(e=>e+"   ‚úÖ images column is working!\n"),await r.O.from("applications").delete().eq("id",e.id),s(e=>e+"   \uD83E\uDDF9 Test data cleaned up\n"))}catch(e){s(s=>s+`   ‚ùå Column test failed: ${e.message}
`)}s(e=>e+"\n3. Checking for existing image_url data...\n");try{let{data:e,error:i}=await r.O.from("applications").select("id, name, image_url, images").not("image_url","is",null).neq("image_url","");i?s(e=>e+`   ‚ö†Ô∏è  Could not check existing data: ${i.message}
`):e&&e.length>0?(s(s=>s+`   üìä Found ${e.length} records with image_url data
`),e.slice(0,3).forEach(e=>{s(s=>s+`   ‚Ä¢ ${e.name}: ${e.image_url}
`)}),e.length>3&&s(s=>s+`   ... and ${e.length-3} more records
`),s(e=>e+"   \uD83D\uDCA1 Consider migrating this data to images[] column\n")):s(e=>e+"   ‚úÖ No existing image_url data found\n")}catch(e){s(s=>s+`   ‚ö†Ô∏è  Data check failed: ${e.message}
`)}s(e=>e+"\n4. Summary and next steps:\n"),s(e=>e+"   ‚úÖ Forms updated to use ImageUploader component\n"),s(e=>e+"   ‚úÖ Database interfaces updated\n"),s(e=>e+"   ‚úÖ Display components updated\n"),s(e=>e+"\n\uD83D\uDCCB Required SQL Commands (run in Supabase SQL Editor):\n\n");let t=`-- Add images column if it doesn't exist
ALTER TABLE applications ADD COLUMN IF NOT EXISTS images TEXT[];

-- Migrate existing image_url data to images array (optional)
UPDATE applications 
SET images = CASE 
  WHEN image_url IS NOT NULL AND image_url != '' THEN ARRAY[image_url]
  ELSE ARRAY[]::TEXT[]
END
WHERE images IS NULL OR array_length(images, 1) IS NULL;

-- Verify the migration
SELECT id, name, image_url, images FROM applications LIMIT 5;`;s(e=>e+t+"\n\n"),s(e=>e+"\uD83D\uDE80 Next steps:\n"),s(e=>e+"1. Run the SQL commands above in Supabase SQL Editor\n"),s(e=>e+"2. Test image upload at /test-image-upload\n"),s(e=>e+"3. Try adding a new application with images\n"),s(e=>e+"4. Verify images display correctly on the frontend\n"),s(e=>e+"\n\uD83C\uDF89 Image upload system is ready!\n")}catch(e){s(s=>s+`
‚ùå Update process failed: ${e.message}
`)}finally{n(!1)}};return(0,a.jsxs)("div",{className:"p-8",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6",children:"\uD83D\uDCF8 Apply Image Upload Updates"}),(0,a.jsxs)("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-green-800 mb-2",children:"‚úÖ Updates Applied"}),a.jsx("p",{className:"text-green-700 mb-2",children:"The following updates have been applied to support image upload in Applications:"}),(0,a.jsxs)("div",{className:"text-sm text-green-600",children:[a.jsx("strong",{children:"Code changes completed:"}),(0,a.jsxs)("ul",{className:"mt-1 space-y-1",children:[a.jsx("li",{children:"‚Ä¢ ‚úÖ Application forms updated to use ImageUploader"}),a.jsx("li",{children:"‚Ä¢ ‚úÖ Database interfaces updated to support images[]"}),a.jsx("li",{children:"‚Ä¢ ‚úÖ Display components updated for multiple images"}),a.jsx("li",{children:"‚Ä¢ ‚úÖ Backward compatibility maintained"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)("button",{onClick:l,disabled:i,className:"bg-green-600 text-white px-6 py-4 rounded-lg hover:bg-green-700 disabled:opacity-50 text-left",children:[a.jsx("div",{className:"font-semibold mb-1",children:"\uD83D\uDD0D Check Database Status"}),a.jsx("div",{className:"text-sm opacity-90",children:"Verify current schema and data"})]}),(0,a.jsxs)("button",{onClick:()=>{s(`
-- üì∏ Complete Applications Image Migration Script
-- Run these commands in your Supabase SQL Editor

-- Step 1: Add images column
ALTER TABLE applications ADD COLUMN IF NOT EXISTS images TEXT[];

-- Step 2: Migrate existing image_url data
UPDATE applications 
SET images = CASE 
  WHEN image_url IS NOT NULL AND image_url != '' THEN ARRAY[image_url]
  ELSE ARRAY[]::TEXT[]
END
WHERE images IS NULL OR array_length(images, 1) IS NULL;

-- Step 3: Verify migration results
SELECT 
  id, 
  name, 
  image_url, 
  images,
  CASE 
    WHEN images IS NOT NULL AND array_length(images, 1) > 0 THEN 'Has images array'
    WHEN image_url IS NOT NULL AND image_url != '' THEN 'Has image_url only'
    ELSE 'No images'
  END as image_status
FROM applications
ORDER BY id;

-- Step 4: (Optional) Clean up old image_url column after confirming migration
-- Only run this after verifying everything works correctly
-- ALTER TABLE applications DROP COLUMN image_url;

-- Step 5: Check final schema
SELECT column_name, data_type, is_nullable 
FROM information_schema.columns 
WHERE table_name = 'applications' 
AND column_name IN ('image_url', 'images')
ORDER BY ordinal_position;
`)},className:"bg-blue-600 text-white px-6 py-4 rounded-lg hover:bg-blue-700 text-left",children:[a.jsx("div",{className:"font-semibold mb-1",children:"\uD83D\uDCDD Show Migration SQL"}),a.jsx("div",{className:"text-sm opacity-90",children:"Get complete database migration commands"})]})]}),e&&(0,a.jsxs)("div",{className:"bg-gray-900 text-green-400 p-6 rounded-lg font-mono text-sm mb-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-lg text-white",children:"\uD83D\uDCCB Update Results:"}),a.jsx("button",{onClick:()=>navigator.clipboard.writeText(e),className:"bg-gray-700 text-white px-3 py-1 rounded text-xs hover:bg-gray-600",children:"\uD83D\uDCCB Copy"})]}),a.jsx("pre",{className:"whitespace-pre-wrap max-h-96 overflow-y-auto",children:e})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"1Ô∏è‚É£ Database Setup"}),(0,a.jsxs)("div",{className:"text-sm text-blue-700 space-y-2",children:[a.jsx("p",{children:"Run SQL commands to:"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[a.jsx("li",{children:"‚Ä¢ Add images[] column"}),a.jsx("li",{children:"‚Ä¢ Migrate existing data"}),a.jsx("li",{children:"‚Ä¢ Verify schema"})]})]})]}),(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"2Ô∏è‚É£ Test Upload"}),(0,a.jsxs)("div",{className:"text-sm text-green-700 space-y-2",children:[a.jsx("p",{children:"Visit /test-image-upload to:"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[a.jsx("li",{children:"‚Ä¢ Test API endpoint"}),a.jsx("li",{children:"‚Ä¢ Try file uploads"}),a.jsx("li",{children:"‚Ä¢ Verify functionality"})]})]})]}),(0,a.jsxs)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold text-purple-800 mb-2",children:"3Ô∏è‚É£ Test Forms"}),(0,a.jsxs)("div",{className:"text-sm text-purple-700 space-y-2",children:[a.jsx("p",{children:"Try the updated forms:"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[a.jsx("li",{children:"‚Ä¢ /admin/applications/new"}),a.jsx("li",{children:"‚Ä¢ Edit existing applications"}),a.jsx("li",{children:"‚Ä¢ Upload multiple images"})]})]})]}),(0,a.jsxs)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[a.jsx("h3",{className:"font-semibold text-orange-800 mb-2",children:"4Ô∏è‚É£ Verify Display"}),(0,a.jsxs)("div",{className:"text-sm text-orange-700 space-y-2",children:[a.jsx("p",{children:"Check frontend display:"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[a.jsx("li",{children:"‚Ä¢ Home page applications"}),a.jsx("li",{children:"‚Ä¢ Applications list page"}),a.jsx("li",{children:"‚Ä¢ Image galleries"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-4",children:"‚ö° Quick Start Guide"}),(0,a.jsxs)("div",{className:"text-sm text-yellow-700 space-y-3",children:[(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"1. Database Migration (Required):"}),a.jsx("p",{children:"Copy and run the SQL commands in your Supabase SQL Editor to add the images[] column."})]}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"2. Test Image Upload:"}),a.jsx("p",{children:"Visit /test-image-upload to verify the upload system works correctly."})]}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"3. Try the Forms:"}),a.jsx("p",{children:"Go to /admin/applications/new and try uploading images using drag & drop or file selection."})]}),(0,a.jsxs)("div",{children:[a.jsx("strong",{children:"4. Production Setup (Optional):"}),a.jsx("p",{children:"Configure Supabase Storage for real image uploads instead of placeholder images."})]})]})]})]})}},99060:(e,s,i)=>{"use strict";i.d(s,{O:()=>n});var a=i(52997);let t="https://ilxfqrxybtcftioizoan.supabase.co",r="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlseGZxcnh5YnRjZnRpb2l6b2FuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM4NTg5MjMsImV4cCI6MjA2OTQzNDkyM30.Jhjy7136xlqHcVjeCGPDvh4Ofpio3a09Y2fFu2Sqqh0";t||console.warn("Supabase URL not configured properly. Using fallback configuration."),r||console.warn("Supabase Anon Key not configured properly. Using fallback configuration.");let n=(0,a.eI)(t||"https://placeholder.supabase.co",r||"placeholder-key")},93161:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>a});let a=(0,i(68570).createProxy)(String.raw`D:\Ramy\RTS\ReactJS\divemix-website\app\apply-image-updates\page.tsx#default`)},11506:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>n,metadata:()=>r});var a=i(19510),t=i(19125);i(67272);let r={title:"DiveMix - Gas & Compressor Technologies",description:"Leading the industry in compressed air and gas solutions since 1990",icons:{icon:"/img/faveicon.ico"}};function n({children:e}){return a.jsx("html",{lang:"en",children:(0,a.jsxs)("body",{children:[e,a.jsx(t.x7,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,style:{background:"#10b981"}},error:{duration:5e3,style:{background:"#ef4444"}}}})]})})}},67272:()=>{}};var s=require("../../webpack-runtime.js");s.C(e);var i=e=>s(s.s=e),a=s.X(0,[9276,4764,2997],()=>i(93574));module.exports=a})();