(()=>{var e={};e.id=6638,e.ids=[6638],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},55315:e=>{"use strict";e.exports=require("path")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},58359:()=>{},93739:()=>{},16499:(e,t,r)=>{"use strict";r.r(t),r.d(t,{originalPathname:()=>b,patchFetch:()=>y,requestAsyncStorage:()=>g,routeModule:()=>f,serverHooks:()=>h,staticGenerationAsyncStorage:()=>x});var s={};r.r(s),r.d(s,{GET:()=>m});var i=r(49303),a=r(88716),o=r(60670),u=r(87070),l=r(89145);let p=require("fs");var n=r.n(p),c=r(55315),d=r.n(c);async function m(e){try{let e=[];try{let{data:t,error:r}=await l.O.storage.from("images").list("uploads",{limit:100,offset:0});if(!r&&t){for(let r of t)if(r.name&&".emptyFolderPlaceholder"!==r.name){let{data:t}=l.O.storage.from("images").getPublicUrl(`uploads/${r.name}`);e.push({url:t.publicUrl,filename:r.name,size:r.metadata?.size||0,uploadedAt:r.created_at||r.updated_at,source:"supabase"})}}}catch(e){console.log("Supabase storage not available, checking local uploads...")}try{let t=d().join(process.cwd(),"public","uploads");if(n().existsSync(t))for(let r of n().readdirSync(t).filter(e=>{let t=d().extname(e).toLowerCase();return[".jpg",".jpeg",".png",".gif",".webp"].includes(t)})){let s=d().join(t,r),i=n().statSync(s);e.find(e=>e.filename===r)||e.push({url:`/uploads/${r}`,filename:r,size:i.size,uploadedAt:i.mtime.toISOString(),source:"local"})}}catch(e){console.log("Local uploads folder not accessible")}return e.sort((e,t)=>new Date(t.uploadedAt).getTime()-new Date(e.uploadedAt).getTime()),u.NextResponse.json({success:!0,images:e,count:e.length})}catch(e){return console.error("Error listing images:",e),u.NextResponse.json({error:"Failed to list images",images:[],count:0},{status:500})}}let f=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/upload/list/route",pathname:"/api/upload/list",filename:"route",bundlePath:"app/api/upload/list/route"},resolvedPagePath:"D:\\Ramy\\RTS\\ReactJS\\divemix-website\\app\\api\\upload\\list\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:g,staticGenerationAsyncStorage:x,serverHooks:h}=f,b="/api/upload/list/route";function y(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:x})}},89145:(e,t,r)=>{"use strict";r.d(t,{O:()=>o});var s=r(72438);let i="https://ilxfqrxybtcftioizoan.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlseGZxcnh5YnRjZnRpb2l6b2FuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM4NTg5MjMsImV4cCI6MjA2OTQzNDkyM30.Jhjy7136xlqHcVjeCGPDvh4Ofpio3a09Y2fFu2Sqqh0";i||console.warn("Supabase URL not configured properly. Using fallback configuration."),a||console.warn("Supabase Anon Key not configured properly. Using fallback configuration.");let o=(0,s.eI)(i||"https://placeholder.supabase.co",a||"placeholder-key")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,5169],()=>r(16499));module.exports=s})();