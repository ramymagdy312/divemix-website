(()=>{var e={};e.id=6638,e.ids=[6638],e.modules={20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},92048:e=>{"use strict";e.exports=require("fs")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},55315:e=>{"use strict";e.exports=require("path")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},58359:()=>{},93739:()=>{},37272:(e,t,r)=>{"use strict";r.r(t),r.d(t,{originalPathname:()=>b,patchFetch:()=>y,requestAsyncStorage:()=>g,routeModule:()=>f,serverHooks:()=>x,staticGenerationAsyncStorage:()=>h});var s={};r.r(s),r.d(s,{GET:()=>m});var o=r(49303),i=r(88716),a=r(60670),u=r(87070),l=r(89145),n=r(92048),p=r.n(n),c=r(55315),d=r.n(c);async function m(e){try{let{searchParams:t}=new URL(e.url),r=t.get("folder")||"root",s=[];try{let e="uploads";"root"!==r&&(e=`uploads/${r}`);let{data:t,error:o}=await l.O.storage.from("images").list(e,{limit:100,offset:0});if(!o&&t){for(let e of t)if(e.name&&".emptyFolderPlaceholder"!==e.name){if("root"===r&&!e.name.includes("."))continue;let t="root"===r?`uploads/${e.name}`:`uploads/${r}/${e.name}`,{data:o}=l.O.storage.from("images").getPublicUrl(t);s.push({url:o.publicUrl,filename:e.name,size:e.metadata?.size||0,uploadedAt:e.created_at||e.updated_at,source:"supabase",folder:r,path:t})}}}catch(e){console.log("Supabase storage not available, checking local uploads...")}try{let e=d().join(process.cwd(),"public","uploads"),t=e;if("root"!==r&&(t=d().join(e,r)),p().existsSync(t))for(let e of p().readdirSync(t).filter(e=>{let t=d().extname(e).toLowerCase();return[".jpg",".jpeg",".png",".gif",".webp"].includes(t)})){let o=d().join(t,e),i=p().statSync(o);if(!s.find(t=>t.filename===e)){let t="root"===r?`/uploads/${e}`:`/uploads/${r}/${e}`;s.push({url:t,filename:e,size:i.size,uploadedAt:i.mtime.toISOString(),source:"local",folder:r,path:t})}}}catch(e){console.log("Local uploads folder not accessible")}return s.sort((e,t)=>new Date(t.uploadedAt).getTime()-new Date(e.uploadedAt).getTime()),u.NextResponse.json({success:!0,images:s,count:s.length})}catch(e){return console.error("Error listing images:",e),u.NextResponse.json({error:"Failed to list images",images:[],count:0},{status:500})}}let f=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/upload/list/route",pathname:"/api/upload/list",filename:"route",bundlePath:"app/api/upload/list/route"},resolvedPagePath:"D:\\Ramy\\RTS\\ReactJS\\divemix-website\\app\\api\\upload\\list\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:g,staticGenerationAsyncStorage:h,serverHooks:x}=f,b="/api/upload/list/route";function y(){return(0,a.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:h})}},89145:(e,t,r)=>{"use strict";r.d(t,{O:()=>a});var s=r(72438);let o="https://ilxfqrxybtcftioizoan.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlseGZxcnh5YnRjZnRpb2l6b2FuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM4NTg5MjMsImV4cCI6MjA2OTQzNDkyM30.Jhjy7136xlqHcVjeCGPDvh4Ofpio3a09Y2fFu2Sqqh0";o||console.warn("Supabase URL not configured properly. Using fallback configuration."),i||console.warn("Supabase Anon Key not configured properly. Using fallback configuration.");let a=(0,s.eI)(o||"https://placeholder.supabase.co",i||"placeholder-key")}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,5169],()=>r(37272));module.exports=s})();