(()=>{var e={};e.id=5737,e.ids=[5737],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},71568:e=>{"use strict";e.exports=require("zlib")},25202:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>d,routeModule:()=>m,tree:()=>n}),s(28164),s(11506),s(35866);var a=s(23191),r=s(88716),l=s(37922),i=s.n(l),c=s(95231),o={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>c[e]);s.d(t,o);let n=["",{children:["products",{children:["[categoryId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,28164)),"D:\\Ramy\\RTS\\ReactJS\\divemix-website\\app\\products\\[categoryId]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,11506)),"D:\\Ramy\\RTS\\ReactJS\\divemix-website\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],d=["D:\\Ramy\\RTS\\ReactJS\\divemix-website\\app\\products\\[categoryId]\\page.tsx"],u="/products/[categoryId]/page",x={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/products/[categoryId]/page",pathname:"/products/[categoryId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},72975:(e,t,s)=>{Promise.resolve().then(s.bind(s,67512)),Promise.resolve().then(s.bind(s,21211)),Promise.resolve().then(s.bind(s,86941)),Promise.resolve().then(s.bind(s,71983))},71983:(e,t,s)=>{"use strict";s.d(t,{default:()=>N});var a=s(10326),r=s(17577),l=s(35047),i=s(99060),c=s(11890),o=s(39183),n=s(94019),d=s(46226);let u=({images:e,currentIndex:t,onClose:s,onNext:r,onPrevious:l,alt:i})=>(0,a.jsxs)("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center",children:[a.jsx("button",{onClick:s,className:"absolute top-4 right-4 text-white hover:text-gray-300 p-2","aria-label":"Close modal",children:a.jsx(n.Z,{className:"h-8 w-8"})}),(0,a.jsxs)("div",{className:"relative max-w-7xl mx-auto px-4 w-full",children:[a.jsx(d.default,{src:e[t],alt:`${i} - ${t+1}`,width:1200,height:800,className:"max-h-[85vh] mx-auto object-contain"}),e.length>1&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:l,className:"absolute left-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 p-2","aria-label":"Previous image",children:a.jsx(c.Z,{className:"h-8 w-8"})}),a.jsx("button",{onClick:r,className:"absolute right-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 p-2","aria-label":"Next image",children:a.jsx(o.Z,{className:"h-8 w-8"})})]}),a.jsx("div",{className:"absolute bottom-4 left-0 right-0",children:a.jsx("div",{className:"flex justify-center gap-2",children:e.map((e,s)=>a.jsx("div",{className:`w-2 h-2 rounded-full ${s===t?"bg-white":"bg-gray-500"}`},s))})})]})]}),x=({images:e,alt:t})=>{let[s,l]=(0,r.useState)(0),[i,n]=(0,r.useState)(!1),x=(0,r.useCallback)(t=>{t?.stopPropagation(),l(t=>0===t?e.length-1:t-1)},[e.length]),m=(0,r.useCallback)(t=>{t?.stopPropagation(),l(t=>t===e.length-1?0:t+1)},[e.length]);(0,r.useEffect)(()=>{let e=e=>{"Escape"===e.key&&i&&n(!1),"ArrowLeft"===e.key&&i&&x(),"ArrowRight"===e.key&&i&&m()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[i,m,x]);let h=e=>{l(e)};return(0,a.jsxs)("div",{className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"relative h-full rounded-lg overflow-hidden cursor-pointer group",onClick:()=>{n(!0)},children:[a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx(d.default,{src:e[s],alt:`${t} - ${s+1}`,fill:!0,className:"object-contain"})}),e.length>1&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:x,className:"absolute left-2 top-1/2 -translate-y-1/2 p-2 bg-black/50 rounded-full text-white hover:bg-black/70 transition-colors opacity-0 group-hover:opacity-100","aria-label":"Previous image",children:a.jsx(c.Z,{className:"h-5 w-5"})}),a.jsx("button",{onClick:m,className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-black/50 rounded-full text-white hover:bg-black/70 transition-colors opacity-0 group-hover:opacity-100","aria-label":"Next image",children:a.jsx(o.Z,{className:"h-5 w-5"})})]})]}),e.length>1&&a.jsx("div",{className:"flex gap-2 mt-4 h-16",children:e.map((e,r)=>a.jsx("button",{onClick:()=>h(r),className:`w-16 rounded-md overflow-hidden transition-all ${r===s?"ring-2 ring-cyan-500 opacity-100":"opacity-60 hover:opacity-100"}`,children:a.jsx("div",{className:"aspect-square relative bg-gray-50",children:a.jsx(d.default,{src:e,alt:`${t} thumbnail ${r+1}`,fill:!0,className:"object-contain"})})},r))}),i&&a.jsx(u,{images:e,currentIndex:s,onClose:()=>n(!1),onNext:m,onPrevious:x,alt:t})]})},m=({product:e})=>a.jsx("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-shadow p-8",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[a.jsx("div",{className:"w-full md:w-1/2 lg:w-2/5",children:a.jsx("div",{className:"aspect-square relative rounded-lg overflow-hidden bg-gray-50",children:a.jsx(x,{images:e.images,alt:e.name})})}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-2xl font-bold mb-4",children:e.name}),a.jsx("p",{className:"text-gray-600 text-lg leading-relaxed mb-6",children:e.description}),e.features.length>0&&(0,a.jsxs)("div",{children:[a.jsx("h4",{className:"font-semibold text-lg mb-3",children:"Key Features:"}),a.jsx("ul",{className:"space-y-2",children:e.features.map(e=>(0,a.jsxs)("li",{className:"flex items-center text-gray-700",children:[a.jsx("span",{className:"w-2 h-2 bg-cyan-600 rounded-full mr-2"}),e]},e))})]})]})]})});var h=s(30112),g=s(87628),p=s(90214);let y=({categoryId:e})=>{let[t,s]=(0,r.useState)([]),[l,c]=(0,r.useState)(!0),[o,n]=(0,r.useState)(null),{searchTerm:d,setSearchTerm:u,filteredItems:x}=(0,g.R)(t,["name","description"]),y=(0,r.useCallback)(async()=>{try{n(null);let{data:t,error:a}=await i.O.from("product_categories").select("id, slug, name").eq("slug",e).single();if(a||!t){console.log("Category not found in database:",a),n("Category not found"),s([]),c(!1);return}let{data:r,error:l}=await i.O.from("products").select("*").eq("category_id",t.id).eq("is_active",!0).order("display_order",{ascending:!0});if(l)throw l;s(r||[]),r&&0!==r.length||console.log("No products found for category:",e)}catch(e){console.error("Error fetching products:",e),n(e.message),s([])}finally{c(!1)}},[e]);return((0,r.useEffect)(()=>{y()},[y]),l)?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-cyan-600"})}):a.jsx(p.Z,{animation:"fadeIn",children:(0,a.jsxs)("div",{children:[a.jsx(h.Z,{value:d,onChange:u,placeholder:"Search products..."}),x.length>0?a.jsx("div",{className:"space-y-8",children:x.map(e=>{let t=e.images&&e.images.length>0?e.images:e.image_url?[e.image_url]:[];return a.jsx(m,{product:{id:e.id,name:e.name,description:e.description,short_description:e.short_description||e.description,category_id:e.category_id||"",image_url:e.image_url||"",features:e.features||[],images:t,is_active:e.is_active,display_order:e.display_order}},e.id)})}):a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-500 text-lg",children:"No products found matching your search."})})]})})},f=({category:e})=>{if(!e)return a.jsx("div",{className:"relative bg-cyan-900 text-white",children:a.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24",children:a.jsx("div",{className:"flex flex-col md:flex-row items-center gap-12",children:(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Loading Category..."}),a.jsx("p",{className:"text-xl text-cyan-100 leading-relaxed max-w-2xl",children:"Please wait while we load the category information."})]})})})});let t=e.image_url||"https://images.unsplash.com/photo-1441986300917-64674bd600d8?auto=format&fit=crop&w=2000",s=e.name||"Unknown Category",r=e.description||"No description available";return(0,a.jsxs)("div",{className:"relative bg-cyan-900 text-white",children:[a.jsx("div",{className:"absolute inset-0 z-0",children:a.jsx(d.default,{src:t,alt:s,fill:!0,className:"object-cover opacity-50",priority:!0})}),a.jsx("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24",children:a.jsx("div",{className:"flex flex-col md:flex-row items-center gap-12",children:(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-6",children:s}),a.jsx("p",{className:"text-xl text-cyan-100 leading-relaxed max-w-2xl",children:r})]})})})]})},j=({products:e})=>{let{searchTerm:t,setSearchTerm:s,filteredItems:r}=(0,g.R)(e,["name","description"]);return a.jsx(p.Z,{animation:"fadeIn",children:(0,a.jsxs)("div",{children:[a.jsx(h.Z,{value:t,onChange:s,placeholder:"Search products..."}),r.length>0?a.jsx("div",{className:"space-y-8",children:r.map(e=>a.jsx(m,{product:e},e.id))}):a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-500 text-lg",children:"No products found matching your search."})})]})})};var v=s(86333);let b=({categoryId:e})=>{let t=(0,l.useRouter)(),[s,c]=(0,r.useState)(null),[o,n]=(0,r.useState)([]),[d,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{x()},[e]);let x=async()=>{try{let[t,s]=await Promise.all([i.O.from("product_categories").select("*").eq("id",e).single(),i.O.from("products").select("*").eq("category_id",e).eq("is_active",!0).order("display_order",{ascending:!0})]);t.error?(console.error("Error fetching category:",t.error),c(null)):c(t.data),s.error?(console.error("Error fetching products:",s.error),n([])):n(s.data||[])}catch(e){console.error("Error:",e),c(null),n([])}finally{u(!1)}};return d?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-cyan-600"})}):s?(0,a.jsxs)("div",{children:[a.jsx(f,{category:s}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 mb-8",children:[a.jsx("button",{onClick:()=>t.push("/products"),className:"flex items-center justify-center w-10 h-10 rounded-full bg-cyan-50 text-cyan-600 hover:bg-cyan-100 transition-colors",children:a.jsx(v.Z,{className:"h-5 w-5"})}),a.jsx("span",{className:"text-gray-600",children:"Back to categories"})]}),a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Demo Mode"}),a.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:a.jsx("p",{children:"You're viewing demo products. Database connection is not available."})})]})]})}),a.jsx(j,{products:o})]})]}):a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Category not found"}),(0,a.jsxs)("p",{className:"text-gray-600 mb-8",children:['The category "',e,'" could not be found.']}),a.jsx("button",{onClick:()=>t.push("/products"),className:"bg-cyan-600 text-white px-6 py-3 rounded-lg hover:bg-cyan-700 transition-colors",children:"Back to Products"})]})})},N=({categoryId:e})=>{let t=(0,l.useRouter)(),[s,c]=(0,r.useState)(null),[o,n]=(0,r.useState)(!0),[d,u]=(0,r.useState)(null),x=(0,r.useCallback)(async()=>{try{u(null),console.log("Fetching category with ID/slug:",e);let{data:t,error:s}=await i.O.from("product_categories").select("*").eq("slug",`${e}`).eq("is_active",!0).single();if(console.log("Category query result:",{data:t,error:s}),s)throw s;c(t),console.log("Category set successfully:",t)}catch(e){console.error("Error fetching category:",e),u(e.message),c(null)}finally{n(!1)}},[e]);return((0,r.useEffect)(()=>{x()},[x]),o)?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-cyan-600"})}):d||!s?(console.log("Falling back to CategoryDetailFallback due to:",d||"Category not found"),a.jsx(b,{categoryId:e})):(0,a.jsxs)("div",{children:[a.jsx(f,{category:s}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4 mb-8",children:[a.jsx("button",{onClick:()=>t.push("/products"),className:"flex items-center justify-center w-10 h-10 rounded-full bg-cyan-50 text-cyan-600 hover:bg-cyan-100 transition-colors",children:a.jsx(v.Z,{className:"h-5 w-5"})}),a.jsx("span",{className:"text-gray-600",children:"Back to categories"})]}),a.jsx(y,{categoryId:e})]})]})}},30112:(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var a=s(10326);s(17577);var r=s(88307);let l=({value:e,onChange:t,placeholder:s="Search categories..."})=>(0,a.jsxs)("div",{className:"relative max-w-2xl mx-auto mb-12",children:[a.jsx("input",{type:"text",placeholder:s,value:e,onChange:e=>t(e.target.value),className:"w-full pl-12 pr-4 py-4 rounded-xl border border-gray-200 focus:border-cyan-500 focus:ring-2 focus:ring-cyan-200 transition-colors text-lg"}),a.jsx(r.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-6 w-6 text-gray-400"})]})},87628:(e,t,s)=>{"use strict";s.d(t,{R:()=>r});var a=s(17577);let r=(e,t)=>{let[s,r]=(0,a.useState)(""),l=(0,a.useMemo)(()=>{if(!s.trim())return e;let a=s.toLowerCase();return e.filter(e=>t.some(t=>{let s=e[t];return s&&s.toString().toLowerCase().includes(a)}))},[e,s,t]);return{searchTerm:s,setSearchTerm:r,filteredItems:l}}},86333:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},11890:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},39183:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},88307:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(76557).Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},35047:(e,t,s)=>{"use strict";var a=s(77389);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},28164:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d,generateStaticParams:()=>n});var a=s(19510);let r=(0,s(68570).createProxy)(String.raw`D:\Ramy\RTS\ReactJS\divemix-website\app\components\products\CategoryDetailDB.tsx#default`);var l=s(81700),i=s(94267),c=s(64759),o=s(71159);async function n(){return[{categoryId:"diving-equipment"},{categoryId:"safety-gear"},{categoryId:"underwater-cameras"},{categoryId:"accessories"},{categoryId:"wetsuits-gear"},{categoryId:"maintenance-tools"}]}function d({params:e}){return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col",children:[a.jsx(l.Z,{}),a.jsx("main",{className:"flex-grow page-content",children:a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx(o.Suspense,{fallback:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-cyan-600"})}),children:a.jsx(r,{categoryId:e.categoryId})})})}),a.jsx(i.Z,{}),a.jsx(c.Z,{})]})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[9276,4764,2997,3599,6226,1886,8016],()=>s(25202));module.exports=a})();